"use strict";(self.webpackChunkappstore=self.webpackChunkappstore||[]).push([[974],{3344:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a,s=n(4165),r=n(5861),l=n(9439),i=n(1413),o=n(5200),c=n(954),u=n(1243),d=n(7346),p=n.n(d),h=n(2791),m=n(2869),x=n(3340),v=n(3360),f=n(9743),j=n(2677),g=n(9795),Z=n(4849),y=n(7689),k=n.p+"static/media/default.50b14dd03b88a6d9022a.png",b=n(5987),C=n(1694),N=n.n(C),w=n(3161),A=n(184),S=["label","type","name","value","readOnly","placeholder","register","errors","className","labelClassName","containerClass","refCallback","children"],F=function(e){var t=e.name,n=e.placeholder,a=e.refCallback,s=e.errors,r=e.register,o=e.className,c=e.value,u=e.readOnly,d=(0,h.useState)(!1),p=(0,l.Z)(d,2),m=p[0],x=p[1];return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(w.Z,{className:"mb-0",children:[(0,A.jsx)(g.Z.Control,(0,i.Z)((0,i.Z)({type:m?"text":"password",placeholder:n,name:t,id:t,as:"input",ref:function(e){a&&a(e)},className:o,isInvalid:!(!s||!s[t])},r?r(t):{}),{},{autoComplete:t,defaultValue:c,readOnly:u})),(0,A.jsx)("div",{className:N()("input-group-text","input-group-password",{"show-password":m}),"data-password":m?"true":"false",children:(0,A.jsx)("span",{className:"password-eye",onClick:function(){x(!m)}})})]})})},P=function(e){var t=e.label,n=e.type,a=e.name,s=e.value,r=e.readOnly,l=e.placeholder,o=e.register,c=e.errors,u=e.className,d=e.labelClassName,p=e.containerClass,h=e.refCallback,m=e.children,x=(0,b.Z)(e,S),v="textarea"===n?"textarea":"select"===n?"select":"input";return(0,A.jsx)(A.Fragment,{children:"hidden"===n?(0,A.jsx)("input",(0,i.Z)((0,i.Z)({type:n,name:a},o?o(a):{}),x)):(0,A.jsx)(A.Fragment,{children:"password"===n?(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(g.Z.Group,{className:p,children:[t?(0,A.jsxs)(A.Fragment,{children:[" ",(0,A.jsx)(g.Z.Label,{className:d,children:t})," ",m," "]}):null,(0,A.jsx)(F,{name:a,placeholder:l,refCallback:h,errors:c,register:o,className:u,value:s,readOnly:r}),c&&c[a]?(0,A.jsx)(g.Z.Control.Feedback,{type:"invalid",className:"d-block",children:c[a].message}):null]})}):(0,A.jsx)(A.Fragment,{children:"select"===n?(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(g.Z.Group,{className:p,children:[t?(0,A.jsx)(g.Z.Label,{className:d,children:t}):null,(0,A.jsx)(g.Z.Select,(0,i.Z)((0,i.Z)((0,i.Z)({type:n,label:t,name:a,id:a,ref:function(e){h&&h(e)},comp:v,className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x),{},{children:m})),c&&c[a]?(0,A.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})}):(0,A.jsx)(A.Fragment,{children:"checkbox"===n||"radio"===n?(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(g.Z.Group,{className:p,children:[(0,A.jsx)(g.Z.Check,(0,i.Z)((0,i.Z)({type:n,label:t,name:a,id:a,ref:function(e){h&&h(e)},className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x)),c&&c[a]?(0,A.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})}):(0,A.jsxs)(g.Z.Group,{className:p,children:[t?(0,A.jsx)(g.Z.Label,{className:d,children:t}):null,(0,A.jsx)(g.Z.Control,(0,i.Z)((0,i.Z)((0,i.Z)({type:n,placeholder:l,value:s,name:a,id:a,as:v,ref:function(e){h&&h(e)},className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x),{},{autoComplete:a,children:m||null})),c&&c[a]?(0,A.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})})})})})},E=n(3144),_=n(5671);function G(){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)((0,s.Z)().mark((function e(){var t,n,r,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=10;break}return e.next=3,fetch("../myapps/config.json");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.APPMANAGE.APPMANAGE_USERNAME,l=n.APPMANAGE.APPMANAGE_PASSWORD,a=btoa(r+":"+l);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.Z.defaults.headers.post["Content-Type"]="application/json",u.Z.defaults.headers.get["Content-Type"]="application/json",u.Z.defaults.headers.common["Cache-Control"]="no-cache",u.Z.defaults.headers.common.Pragma="no-cache",u.Z.defaults.headers.common.Expires="0",u.Z.interceptors.response.use((function(e){return e}),(function(e){var t;if(e&&e.response&&404===e.response.status)y.Fg;else{if(!e||!e.response||500!==e.response.status)return t=e.response&&e.response.data?e.response.data.message:e.message||e,Promise.reject(t);y.Fg}}));var I=(0,E.Z)((function e(){(0,_.Z)(this,e),this.get=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t,n){var a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return e.t0=e.sent,u.Z.defaults.headers.common.Authorization="Basic "+e.t0,n?(r=n?Object.keys(n).map((function(e){return e+"="+n[e]})).join("&"):"",a=u.Z.get("".concat(t,"?").concat(r),n)):a=u.Z.get("".concat(t),n),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.create=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return e.t0=e.sent,u.Z.defaults.headers.common.Authorization="Basic "+e.t0,e.abrupt("return",u.Z.post(t,n));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})),O=new I;var L=p().gettext,M=p().language,R=h.forwardRef((function(e,t){return(0,A.jsx)(o.Z,(0,i.Z)({elevation:6,ref:t,variant:"filled"},e))})),B=function(e){var t,n,a,i=e.product,o=e.showFlag,u=e.onClose,d=(0,h.useState)(0),f=(0,l.Z)(d,2),j=f[0],g=f[1],Z=(0,y.s0)(),b=(0,h.useState)(!0),C=(0,l.Z)(b,2),N=C[0],w=C[1],S=(0,h.useState)(""),F=(0,l.Z)(S,2),E=F[0],_=F[1],G=(0,h.useState)(!1),z=(0,l.Z)(G,2),I=z[0],B=z[1],D=(0,h.useState)(""),H=(0,l.Z)(D,2),T=H[0],V=H[1],U=(0,h.useState)(!1),W=(0,l.Z)(U,2),q=W[0],Q=W[1];function J(){return(J=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=20;break}if(!(!E||E.length<2||E.length>20)){e.next=6;break}B(!0),V(L("Please enter a custom application name between 2 and 20 characters.")),e.next=19;break;case 6:return e.prev=6,Q(!0),e.next=10,n={app_name:i.key,app_version:ee,customer_app_name:E},O.get("".concat("/AppManage/AppInstall"),n);case 10:(t=e.sent).data.Error?(B(!0),V(t.data.Error.Message),Q(!1)):(B(!1),V(""),p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump("/myapps"),u()),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),B(!1),V(""),Z("/error-500");case 19:return e.abrupt("return");case 20:w(!N);case 21:case"end":return e.stop()}var n}),e,null,[[6,14]])})))).apply(this,arguments)}var K=((null===(t=i.distribution)||void 0===t?void 0:t.filter((function(e){return"Community"===e.key})))||[]).map((function(e){return e.value})),X=K&&1===K.length?K.toString().split(","):K,Y=(0,h.useState)(X[0]),$=(0,l.Z)(Y,2),ee=$[0],te=$[1],ne=null===i||void 0===i||null===(n=i.logo)||void 0===n||null===(a=n.imageurl)||void 0===a?void 0:a.split("/").pop(),ae=function(e,t){"clickaway"!==t&&(B(!1),V(""))};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(m.Z,{show:o,onHide:u,size:"lg",scrollable:"true",backdrop:"static",children:[(0,A.jsx)(m.Z.Header,{onHide:u,closeButton:!0,children:(0,A.jsxs)("div",{style:{padding:"10px"},children:[(0,A.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,A.jsx)("img",{src:"./static/data/logos/".concat(ne),alt:"",className:"app-icon",onError:function(e){return e.target.src=k}})}),(0,A.jsxs)("div",{className:"col-same-height",children:[(0,A.jsx)("h4",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:i.trademark}),(0,A.jsx)("div",{children:(0,A.jsxs)("a",{rel:"noreferrer",href:"https://support.websoft9.com/docs/"+i.key,target:"_blank",style:{color:"#2196f3"},children:[i.trademark," ",L("developers")]})}),(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,A.jsxs)("span",{style:{marginRight:"5px"},children:[L("Version")," : "]})," ",K]}),(0,A.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,A.jsxs)("span",{style:{marginRight:"5px"},children:[L("Requires at least")," : ",i.vcpu," vCPU,  ",i.memory,"  GB memory, ",i.storage," GB storage"]})})]})]})}),(0,A.jsxs)(m.Z.Body,{children:[(0,A.jsxs)("div",{style:{display:N?"block":"none"},children:[(0,A.jsx)(x.Z,{activeIndex:j,onSelect:function(e,t){g(e)},style:{width:"80%",margin:"0 auto"},children:(i.screenshots||[]).map((function(e){var t=e.value.split("/").pop();return(0,A.jsx)(x.Z.Item,{children:(0,A.jsx)("img",{className:"d-block",src:"./static/data/screenshots/".concat("zh_CN"===M?"zh":"en","/").concat(t),alt:null===e||void 0===e?void 0:e.key,width:"100%",height:"300px"})},null===e||void 0===e?void 0:e.id)}))}),(0,A.jsxs)("div",{style:{padding:"10px"},children:[(0,A.jsx)("h4",{children:L("Overview")}),i.overview]}),(0,A.jsxs)("div",{style:{padding:"10px"},children:[(0,A.jsx)("h4",{children:L("Description")}),i.description]})]}),(0,A.jsx)("div",{style:{display:N?"none":"block"},children:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("span",{style:{marginRight:"5px"},children:[L("Version")," :"]}),X&&(0,A.jsx)(P,{name:"select",type:"select",className:"form-select",onChange:function(e){return t=e.target.value,void te(t);var t},children:(X||[]).map((function(e,t){return(0,A.jsx)("option",{value:e,children:e},e+t)}))},"select")]}),(0,A.jsxs)("div",{style:{marginTop:"5px"},children:[(0,A.jsxs)("span",{style:{marginRight:"5px"},children:[L("Name")," :"]}),(0,A.jsx)(P,{type:"text",value:E,name:"app_Name",placeholder:L("Only letters and numbers from 2 to 20 are allowed. No special characters."),onChange:function(e){!function(e){if(_(e),e){var t=e.replace(/[^a-z0-9]/gi,"").toLowerCase();_(t),B(!1),V("")}else B(!0),V(L("Please enter a custom application name between 2 and 20 characters."))}(e.target.value)}})]})]})})]}),(0,A.jsxs)(m.Z.Footer,{children:[(0,A.jsx)(v.Z,{variant:"light",onClick:u,children:L("Close")})," ",(0,A.jsx)(v.Z,{disabled:q,variant:"primary",onClick:function(){return J.apply(this,arguments)},children:L("Install")})]})]}),I&&(0,A.jsx)(c.Z,{open:I,autoHideDuration:5e3,onClose:ae,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,A.jsx)(R,{onClose:ae,severity:"error",sx:{width:"100%"},children:T})})]})},D=function(){var e=(0,h.useState)(!1),t=(0,l.Z)(e,2),n=t[0],a=t[1],i=(0,h.useState)(null),o=(0,l.Z)(i,2),c=o[0],d=o[1],p=(0,h.useState)(null),m=(0,l.Z)(p,2),x=m[0],v=m[1],b=(0,h.useState)(null),C=(0,l.Z)(b,2),N=C[0],w=C[1],S=(0,h.useState)(!0),F=(0,l.Z)(S,2),E=F[0],_=F[1],G=(0,h.useState)(""),z=(0,l.Z)(G,2),I=z[0],O=z[1],R=(0,h.useState)([]),D=(0,l.Z)(R,2),H=D[0],T=D[1],V=(0,h.useState)([]),U=(0,l.Z)(V,2),W=U[0],q=U[1],Q=(0,h.useState)([]),J=(0,l.Z)(Q,2),K=J[0],X=J[1],Y=(0,h.useState)(!1),$=(0,l.Z)(Y,2),ee=$[0],te=$[1],ne=(0,y.s0)(),ae=(0,h.useCallback)((0,r.Z)((0,s.Z)().mark((function e(){var t,n,a,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,Promise.all([u.Z.get("./static/data/json/catalog_".concat("zh_CN"===M?"zh":"en",".json")),u.Z.get("./static/data/json/product_".concat("zh_CN"===M?"zh":"en",".json"))]);case 4:if(t=e.sent,n=(0,l.Z)(t,2),a=n[0],r=n[1],200!==a.status){e.next=13;break}i=a.data.sort((function(e,t){return null===e.position&&null===t.position?0:null===e.position?1:null===t.position?-1:e.position-t.position})),T(i),e.next=14;break;case 13:return e.abrupt("return",(0,A.jsx)("p",{children:"Error: Failed to fetch directory data "}));case 14:if(200!==r.status){e.next=19;break}q(r.data),X(r.data),e.next=20;break;case 19:return e.abrupt("return",(0,A.jsx)("p",{children:"Error: Failed to fetch product data "}));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),ne("/error-500");case 25:te(!1);case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),[M,T,q,X]);if((0,h.useEffect)((function(){ae()}),[ae]),ee)return(0,A.jsx)(Z.Z,{className:"dis_mid"});return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(f.Z,{className:"mb-2",children:[(0,A.jsx)(j.Z,{sm:6,children:(0,A.jsxs)(g.Z.Group,{as:f.Z,children:[(0,A.jsx)(j.Z,{sm:6,children:(0,A.jsxs)(P,{name:"select1",type:"select",className:"form-select",onChange:function(e){return function(e){var t,n,a,s,r,l=("All"===e?[]:null===(t=H.filter((function(t){return t.key===e})))||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.linkedFrom)||void 0===a||null===(s=a.catalogCollection)||void 0===s?void 0:s.items).sort((function(e,t){return null===e.position&&null===t.position?0:null===e.position?1:null===t.position?-1:e.position-t.position}));v(l),r=W.filter((function(t){var n;return null===t||void 0===t||null===(n=t.catalogCollection)||void 0===n?void 0:n.items.some((function(t){var n;return null===t||void 0===t||null===(n=t.catalogCollection)||void 0===n?void 0:n.items.some((function(t){return t.key===e}))}))})),X("All"===e?W:r),w(r),_(!1),O("")}(e.target.value)},children:[(0,A.jsx)("option",{value:"All",selected:E,children:L("All")}),(H||[]).map((function(e,t){return(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+t)}))]},"select1")}),(0,A.jsx)(j.Z,{sm:6,children:(0,A.jsxs)(P,{name:"select2",type:"select",className:"form-select",onChange:function(e){return function(e){var t;t="All"===e?N:W.filter((function(t){var n;return null===t||void 0===t||null===(n=t.catalogCollection)||void 0===n?void 0:n.items.some((function(t){return t.key===e}))})),X(t),O("")}(e.target.value)},children:[(0,A.jsx)("option",{value:"All",children:L("All")}),(x||[]).map((function(e,t){return(0,A.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+t)}))]},"select2")})]})}),(0,A.jsx)(j.Z,{sm:6,children:(0,A.jsx)(j.Z,{xs:"auto",children:(0,A.jsx)(P,{type:"text",name:"search",placeholder:L("Search for apps like WordPress, MySQL, GitLab, \u2026"),value:I,onChange:function(e){return function(e){var t;O(e),t=""===e?W:W.filter((function(t){return t.trademark.toLowerCase().includes(e)||t.key.toLowerCase().includes(e)||t.summary.toLowerCase().includes(e)})),X(t),_(!0),v(null)}(e.target.value)}})})})]}),(0,A.jsx)(f.Z,{children:(K||[]).map((function(e,t){var n,s,r=null===e||void 0===e||null===(n=e.logo)||void 0===n||null===(s=n.imageurl)||void 0===s?void 0:s.split("/").pop();return(0,A.jsx)(j.Z,{xxl:3,sm:6,md:4,className:"appstore-item",children:(0,A.jsxs)("div",{className:"appstore-item-content highlight",onClick:function(){d(e),a(!0)},children:[(0,A.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,A.jsx)("img",{src:"./static/data/logos/".concat(r),alt:"",className:"app-icon",onError:function(e){return e.target.src=k}})}),(0,A.jsxs)("div",{className:"col-same-height",style:{textAlign:"initial"},children:[(0,A.jsx)("h4",{className:"appstore-item-content-title",children:null===e||void 0===e?void 0:e.trademark}),(0,A.jsx)("div",{className:"appstore-item-content-tagline text-muted",children:null===e||void 0===e?void 0:e.summary})]})]})},"app-"+t)}))}),n&&(0,A.jsx)(B,{product:c,showFlag:n,onClose:function(){a(!1),d(null)}})]})}}}]);
//# sourceMappingURL=974.f51aca78.chunk.js.map