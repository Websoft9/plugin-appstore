"use strict";(self.webpackChunkappstore=self.webpackChunkappstore||[]).push([[974],{3344:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var a,s=t(4165),r=t(5861),l=t(9439),i=t(1413),o=t(5200),c=t(954),u=t(1243),d=t(7346),p=t.n(d),h=t(2791),m=t(2869),x=t(3340),v=t(3360),f=t(9743),g=t(2677),j=t(9795),Z=t(7689),y=t.p+"static/media/default.50b14dd03b88a6d9022a.png",k=t(5987),b=t(1694),C=t.n(b),N=t(3161),w=t(184),A=["label","type","name","value","readOnly","placeholder","register","errors","className","labelClassName","containerClass","refCallback","children"],S=function(e){var n=e.name,t=e.placeholder,a=e.refCallback,s=e.errors,r=e.register,o=e.className,c=e.value,u=e.readOnly,d=(0,h.useState)(!1),p=(0,l.Z)(d,2),m=p[0],x=p[1];return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(N.Z,{className:"mb-0",children:[(0,w.jsx)(j.Z.Control,(0,i.Z)((0,i.Z)({type:m?"text":"password",placeholder:t,name:n,id:n,as:"input",ref:function(e){a&&a(e)},className:o,isInvalid:!(!s||!s[n])},r?r(n):{}),{},{autoComplete:n,defaultValue:c,readOnly:u})),(0,w.jsx)("div",{className:C()("input-group-text","input-group-password",{"show-password":m}),"data-password":m?"true":"false",children:(0,w.jsx)("span",{className:"password-eye",onClick:function(){x(!m)}})})]})})},F=function(e){var n=e.label,t=e.type,a=e.name,s=e.value,r=e.readOnly,l=e.placeholder,o=e.register,c=e.errors,u=e.className,d=e.labelClassName,p=e.containerClass,h=e.refCallback,m=e.children,x=(0,k.Z)(e,A),v="textarea"===t?"textarea":"select"===t?"select":"input";return(0,w.jsx)(w.Fragment,{children:"hidden"===t?(0,w.jsx)("input",(0,i.Z)((0,i.Z)({type:t,name:a},o?o(a):{}),x)):(0,w.jsx)(w.Fragment,{children:"password"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(j.Z.Group,{className:p,children:[n?(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)(j.Z.Label,{className:d,children:n})," ",m," "]}):null,(0,w.jsx)(S,{name:a,placeholder:l,refCallback:h,errors:c,register:o,className:u,value:s,readOnly:r}),c&&c[a]?(0,w.jsx)(j.Z.Control.Feedback,{type:"invalid",className:"d-block",children:c[a].message}):null]})}):(0,w.jsx)(w.Fragment,{children:"select"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(j.Z.Group,{className:p,children:[n?(0,w.jsx)(j.Z.Label,{className:d,children:n}):null,(0,w.jsx)(j.Z.Select,(0,i.Z)((0,i.Z)((0,i.Z)({type:t,label:n,name:a,id:a,ref:function(e){h&&h(e)},comp:v,className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x),{},{children:m})),c&&c[a]?(0,w.jsx)(j.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})}):(0,w.jsx)(w.Fragment,{children:"checkbox"===t||"radio"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(j.Z.Group,{className:p,children:[(0,w.jsx)(j.Z.Check,(0,i.Z)((0,i.Z)({type:t,label:n,name:a,id:a,ref:function(e){h&&h(e)},className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x)),c&&c[a]?(0,w.jsx)(j.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})}):(0,w.jsxs)(j.Z.Group,{className:p,children:[n?(0,w.jsx)(j.Z.Label,{className:d,children:n}):null,(0,w.jsx)(j.Z.Control,(0,i.Z)((0,i.Z)((0,i.Z)({type:t,placeholder:l,value:s,name:a,id:a,as:v,ref:function(e){h&&h(e)},className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x),{},{autoComplete:a,children:m||null})),c&&c[a]?(0,w.jsx)(j.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})})})})})},P=t(3144),E=t(5671);function _(){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)((0,s.Z)().mark((function e(){var n,t,r,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=10;break}return e.next=3,fetch("../myapps/config.json");case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,r=t.APPMANAGE.APPMANAGE_USERNAME,l=t.APPMANAGE.APPMANAGE_PASSWORD,a=btoa(r+":"+l);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.Z.defaults.headers.post["Content-Type"]="application/json",u.Z.defaults.headers.get["Content-Type"]="application/json",u.Z.defaults.headers.common["Cache-Control"]="no-cache",u.Z.defaults.headers.common.Pragma="no-cache",u.Z.defaults.headers.common.Expires="0",u.Z.interceptors.response.use((function(e){return e}),(function(e){var n;if(e&&e.response&&404===e.response.status)Z.Fg;else{if(!e||!e.response||500!==e.response.status)return n=e.response&&e.response.data?e.response.data.message:e.message||e,Promise.reject(n);Z.Fg}}));var z=(0,P.Z)((function e(){(0,E.Z)(this,e),this.get=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n,t){var a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.t0=e.sent,u.Z.defaults.headers.common.Authorization="Basic "+e.t0,t?(r=t?Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"):"",a=u.Z.get("".concat(n,"?").concat(r),t)):a=u.Z.get("".concat(n),t),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.create=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.t0=e.sent,u.Z.defaults.headers.common.Authorization="Basic "+e.t0,e.abrupt("return",u.Z.post(n,t));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})),I=new z;var O=p().gettext,L=p().language,M=h.forwardRef((function(e,n){return(0,w.jsx)(o.Z,(0,i.Z)({elevation:6,ref:n,variant:"filled"},e))})),R=function(e){var n,t,a,i=e.product,o=e.showFlag,u=e.onClose,d=(0,h.useState)(0),f=(0,l.Z)(d,2),g=f[0],j=f[1],k=(0,Z.s0)(),b=(0,h.useState)(!0),C=(0,l.Z)(b,2),N=C[0],A=C[1],S=(0,h.useState)(""),P=(0,l.Z)(S,2),E=P[0],_=P[1],G=(0,h.useState)(!1),z=(0,l.Z)(G,2),R=z[0],B=z[1],D=(0,h.useState)(""),H=(0,l.Z)(D,2),T=H[0],V=H[1],U=(0,h.useState)(!1),W=(0,l.Z)(U,2),q=W[0],Q=W[1];function $(){return($=(0,r.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=20;break}if(!(!E||E.length<2||E.length>20)){e.next=6;break}B(!0),V(O("Please enter a custom application name between 2 and 20 characters.")),e.next=19;break;case 6:return e.prev=6,Q(!0),e.next=10,t={app_name:i.key,app_version:ee,customer_app_name:E},I.get("".concat("/AppManage/AppInstall"),t);case 10:(n=e.sent).data.Error?(B(!0),V(n.data.Error.Message),Q(!1)):(B(!1),V(""),p().file("/etc/hostname").watch((function(e){console.log(e)})),p().jump("/myapps"),u()),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),B(!1),V(""),k("/error-500");case 19:return e.abrupt("return");case 20:A(!N);case 21:case"end":return e.stop()}var t}),e,null,[[6,14]])})))).apply(this,arguments)}var J=((null===(n=i.distribution)||void 0===n?void 0:n.filter((function(e){return"Community"===e.key})))||[]).map((function(e){return e.value})),K=J&&1===J.length?J.toString().split(","):J,X=(0,h.useState)(K[0]),Y=(0,l.Z)(X,2),ee=Y[0],ne=Y[1],te=null===i||void 0===i||null===(t=i.logo)||void 0===t||null===(a=t.imageurl)||void 0===a?void 0:a.split("/").pop(),ae=function(e,n){"clickaway"!==n&&(B(!1),V(""))};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(m.Z,{show:o,onHide:u,size:"lg",scrollable:"true",backdrop:"static",children:[(0,w.jsx)(m.Z.Header,{onHide:u,closeButton:!0,children:(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,w.jsx)("img",{src:"./static/data/logos/".concat(te),alt:"",className:"app-icon",onError:function(e){return e.target.src=y}})}),(0,w.jsxs)("div",{className:"col-same-height",children:[(0,w.jsx)("h4",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:i.trademark}),(0,w.jsx)("div",{children:(0,w.jsxs)("a",{rel:"noreferrer",href:"https://support.websoft9.com/docs/"+i.key,target:"_blank",style:{color:"#2196f3"},children:[i.trademark," ",O("developers")]})}),(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[O("Version")," : "]})," ",J]}),(0,w.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[O("Requires at least")," : ",i.vcpu," vCPU,  ",i.memory,"  GB memory, ",i.storage," GB storage"]})})]})]})}),(0,w.jsxs)(m.Z.Body,{children:[(0,w.jsxs)("div",{style:{display:N?"block":"none"},children:[(0,w.jsx)(x.Z,{activeIndex:g,onSelect:function(e,n){j(e)},style:{width:"80%",margin:"0 auto"},children:(i.screenshots||[]).map((function(e){var n=e.value.split("/").pop();return(0,w.jsx)(x.Z.Item,{children:(0,w.jsx)("img",{className:"d-block",src:"./static/data/screenshots/".concat("zh_CN"===L?"zh":"en","/").concat(n),alt:null===e||void 0===e?void 0:e.key,width:"100%",height:"300px"})},null===e||void 0===e?void 0:e.id)}))}),(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("h4",{children:O("Overview")}),i.overview]}),(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("h4",{children:O("Description")}),i.description]})]}),(0,w.jsx)("div",{style:{display:N?"none":"block"},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[O("Version")," :"]}),K&&(0,w.jsx)(F,{name:"select",type:"select",className:"form-select",onChange:function(e){return n=e.target.value,void ne(n);var n},children:(K||[]).map((function(e,n){return(0,w.jsx)("option",{value:e,children:e},e+n)}))},"select")]}),(0,w.jsxs)("div",{style:{marginTop:"5px"},children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[O("Name")," :"]}),(0,w.jsx)(F,{type:"text",value:E,name:"app_Name",placeholder:O("Only letters and numbers from 2 to 20 are allowed. No special characters."),onChange:function(e){!function(e){if(_(e),e){var n=e.replace(/[^a-z0-9]/gi,"").toLowerCase();_(n),B(!1),V("")}else B(!0),V(O("Please enter a custom application name between 2 and 20 characters."))}(e.target.value)}})]})]})})]}),(0,w.jsxs)(m.Z.Footer,{children:[(0,w.jsx)(v.Z,{variant:"light",onClick:u,children:O("Close")})," ",(0,w.jsx)(v.Z,{disabled:q,variant:"primary",onClick:function(){return $.apply(this,arguments)},children:O("Install")})]})]}),R&&(0,w.jsx)(c.Z,{open:R,autoHideDuration:5e3,onClose:ae,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,w.jsx)(M,{onClose:ae,severity:"error",sx:{width:"100%"},children:T})})]})},B=function(){var e=(0,h.useState)(!1),n=(0,l.Z)(e,2),t=n[0],a=n[1],i=(0,h.useState)(null),o=(0,l.Z)(i,2),c=o[0],d=o[1],p=(0,h.useState)(null),m=(0,l.Z)(p,2),x=m[0],v=m[1],k=(0,h.useState)(null),b=(0,l.Z)(k,2),C=b[0],N=b[1],A=(0,h.useState)(!0),S=(0,l.Z)(A,2),P=S[0],E=S[1],_=(0,h.useState)(""),G=(0,l.Z)(_,2),z=G[0],I=G[1],M=(0,h.useState)([]),B=(0,l.Z)(M,2),D=B[0],H=B[1],T=(0,Z.s0)(),V=(0,h.useState)([]),U=(0,l.Z)(V,2),W=U[0],q=U[1],Q=(0,h.useState)([]),$=(0,l.Z)(Q,2),J=$[0],K=$[1],X=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var n,t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("./static/data/json/catalog_".concat("zh_CN"===L?"zh":"en",".json"));case 3:if(200!==(n=e.sent).status){e.next=9;break}t=n.data.sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position})),H(t),e.next=10;break;case 9:return e.abrupt("return",(0,w.jsx)("p",{children:"Error: Failed to fetch directory data "}));case 10:return e.next=12,u.Z.get('./static/data/json/product_${language === "zh_CN" ? "zh" : "en"}.json');case 12:if(200!==(a=e.sent).status){e.next=18;break}q(a.data),K(a.data),e.next=19;break;case 18:return e.abrupt("return",(0,w.jsx)("p",{children:"Error: Failed to fetch product data "}));case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),T("/error-500");case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();(0,h.useEffect)((function(){X()}),[]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(f.Z,{className:"mb-2",children:[(0,w.jsx)(g.Z,{sm:6,children:(0,w.jsxs)(j.Z.Group,{as:f.Z,children:[(0,w.jsx)(g.Z,{sm:6,children:(0,w.jsxs)(F,{name:"select1",type:"select",className:"form-select",onChange:function(e){return function(e){var n,t,a,s,r,l=("All"===e?[]:null===(n=D.filter((function(n){return n.key===e})))||void 0===n||null===(t=n[0])||void 0===t||null===(a=t.linkedFrom)||void 0===a||null===(s=a.catalogCollection)||void 0===s?void 0:s.items).sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position}));v(l),r=W.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))}))})),K("All"===e?W:r),N(r),E(!1),I("")}(e.target.value)},children:[(0,w.jsx)("option",{value:"All",selected:P,children:O("All")}),(D||[]).map((function(e,n){return(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select1")}),(0,w.jsx)(g.Z,{sm:6,children:(0,w.jsxs)(F,{name:"select2",type:"select",className:"form-select",onChange:function(e){return function(e){var n;n="All"===e?C:W.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))})),K(n),I("")}(e.target.value)},children:[(0,w.jsx)("option",{value:"All",children:O("All")}),(x||[]).map((function(e,n){return(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select2")})]})}),(0,w.jsx)(g.Z,{sm:6,children:(0,w.jsx)(g.Z,{xs:"auto",children:(0,w.jsx)(F,{type:"text",name:"search",placeholder:O("Search for apps like WordPress, MySQL, GitLab, \u2026"),value:z,onChange:function(e){return function(e){var n;I(e),n=""===e?W:W.filter((function(n){return n.trademark.toLowerCase().includes(e)||n.key.toLowerCase().includes(e)||n.summary.toLowerCase().includes(e)})),K(n),E(!0),v(null)}(e.target.value)}})})})]}),(0,w.jsx)(f.Z,{children:(J||[]).map((function(e,n){var t,s,r=null===e||void 0===e||null===(t=e.logo)||void 0===t||null===(s=t.imageurl)||void 0===s?void 0:s.split("/").pop();return(0,w.jsx)(g.Z,{xxl:3,sm:6,md:4,className:"appstore-item",children:(0,w.jsxs)("div",{className:"appstore-item-content highlight",onClick:function(){d(e),a(!0)},children:[(0,w.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,w.jsx)("img",{src:"./static/data/logos/".concat(r),alt:"",className:"app-icon",onError:function(e){return e.target.src=y}})}),(0,w.jsxs)("div",{className:"col-same-height",style:{textAlign:"initial"},children:[(0,w.jsx)("h4",{className:"appstore-item-content-title",children:null===e||void 0===e?void 0:e.trademark}),(0,w.jsx)("div",{className:"appstore-item-content-tagline text-muted",children:null===e||void 0===e?void 0:e.summary})]})]})},"app-"+n)}))}),t&&(0,w.jsx)(R,{product:c,showFlag:t,onClose:function(){a(!1),d(null)}})]})}}}]);
//# sourceMappingURL=974.db98e24d.chunk.js.map