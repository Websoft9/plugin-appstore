"use strict";(self.webpackChunkappstore=self.webpackChunkappstore||[]).push([[688],{7688:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var l=t(3433),s=t(4165),r=t(5861),a=t(9439),i=t(168),o=t(1413),c=t(3306),u=t(3173),d=t(9909),p=t(954),m=t(7346),h=t.n(m),v=t(2791),x=t(2869),f=t(3340),g=t(3360),j=t(9743),Z=t(2677),y=t(9795),k=t(7689),C=t(5987),b=t(1694),N=t.n(b),w=t(3161),S=t(184),A=["label","type","name","value","readOnly","placeholder","register","errors","className","labelClassName","containerClass","refCallback","children"],F=function(e){var n=e.name,t=e.placeholder,l=e.refCallback,s=e.errors,r=e.register,i=e.className,c=e.value,u=e.readOnly,d=(0,v.useState)(!1),p=(0,a.Z)(d,2),m=p[0],h=p[1];return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(w.Z,{className:"mb-0",children:[(0,S.jsx)(y.Z.Control,(0,o.Z)((0,o.Z)({type:m?"text":"password",placeholder:t,name:n,id:n,as:"input",ref:function(e){l&&l(e)},className:i,isInvalid:!(!s||!s[n])},r?r(n):{}),{},{autoComplete:n,defaultValue:c,readOnly:u})),(0,S.jsx)("div",{className:N()("input-group-text","input-group-password",{"show-password":m}),"data-password":m?"true":"false",children:(0,S.jsx)("span",{className:"password-eye",onClick:function(){h(!m)}})})]})})},P=function(e){var n=e.label,t=e.type,l=e.name,s=e.value,r=e.readOnly,a=e.placeholder,i=e.register,c=e.errors,u=e.className,d=e.labelClassName,p=e.containerClass,m=e.refCallback,h=e.children,v=(0,C.Z)(e,A),x="textarea"===t?"textarea":"select"===t?"select":"input";return(0,S.jsx)(S.Fragment,{children:"hidden"===t?(0,S.jsx)("input",(0,o.Z)((0,o.Z)({type:t,name:l},i?i(l):{}),v)):(0,S.jsx)(S.Fragment,{children:"password"===t?(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(y.Z.Group,{className:p,children:[n?(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsx)(y.Z.Label,{className:d,children:n})," ",h," "]}):null,(0,S.jsx)(F,{name:l,placeholder:a,refCallback:m,errors:c,register:i,className:u,value:s,readOnly:r}),c&&c[l]?(0,S.jsx)(y.Z.Control.Feedback,{type:"invalid",className:"d-block",children:c[l].message}):null]})}):(0,S.jsx)(S.Fragment,{children:"select"===t?(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(y.Z.Group,{className:p,children:[n?(0,S.jsx)(y.Z.Label,{className:d,children:n}):null,(0,S.jsx)(y.Z.Select,(0,o.Z)((0,o.Z)((0,o.Z)({type:t,label:n,name:l,id:l,ref:function(e){m&&m(e)},comp:x,className:u,isInvalid:!(!c||!c[l])},i?i(l):{}),v),{},{children:h})),c&&c[l]?(0,S.jsx)(y.Z.Control.Feedback,{type:"invalid",children:c[l].message}):null]})}):(0,S.jsx)(S.Fragment,{children:"checkbox"===t||"radio"===t?(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(y.Z.Group,{className:p,children:[(0,S.jsx)(y.Z.Check,(0,o.Z)((0,o.Z)({type:t,label:n,name:l,id:l,ref:function(e){m&&m(e)},className:u,isInvalid:!(!c||!c[l])},i?i(l):{}),v)),c&&c[l]?(0,S.jsx)(y.Z.Control.Feedback,{type:"invalid",children:c[l].message}):null]})}):(0,S.jsxs)(y.Z.Group,{className:p,children:[n?(0,S.jsx)(y.Z.Label,{className:d,children:n}):null,(0,S.jsx)(y.Z.Control,(0,o.Z)((0,o.Z)((0,o.Z)({type:t,placeholder:a,value:s,name:l,id:l,as:x,ref:function(e){m&&m(e)},className:u,isInvalid:!(!c||!c[l])},i?i(l):{}),v),{},{autoComplete:l,children:h||null})),c&&c[l]?(0,S.jsx)(y.Z.Control.Feedback,{type:"invalid",children:c[l].message}):null]})})})})})},G=t(4942),E=function(e){var n=e.children||null,t=e.tag||"div",l=e.color||"secondary",s=e.size||"";return(0,S.jsx)(t,{role:"status",className:N()({"spinner-border":"bordered"===e.type,"spinner-grow":"grow"===e.type},["text-".concat(l)],(0,G.Z)({},"avatar-".concat(s),s),e.className),children:n})};E.defaultProps={tag:"div",type:"bordered"};var I,L=E,O=t(3144),M=t(5671),_=t(1243);function R(){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)((0,s.Z)().mark((function e(){var n,t,l,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=10;break}return e.next=3,fetch("../myapps/config.json");case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,l=t.APPMANAGE.APPMANAGE_USERNAME,r=t.APPMANAGE.APPMANAGE_PASSWORD,I=btoa(l+":"+r);case 10:return e.abrupt("return",I);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}_.Z.defaults.headers.post["Content-Type"]="application/json",_.Z.defaults.headers.get["Content-Type"]="application/json",_.Z.defaults.headers.common["Cache-Control"]="no-cache",_.Z.defaults.headers.common.Pragma="no-cache",_.Z.defaults.headers.common.Expires="0",_.Z.interceptors.response.use((function(e){return e}),(function(e){var n;if(e&&e.response&&404===e.response.status)k.Fg;else{if(!e||!e.response||500!==e.response.status)return n=e.response&&e.response.data?e.response.data.message:e.message||e,Promise.reject(n);k.Fg}}));var B,H=(0,O.Z)((function e(){(0,M.Z)(this,e),this.get=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n,t){var l,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return e.t0=e.sent,_.Z.defaults.headers.common.Authorization="Basic "+e.t0,t?(r=t?Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"):"",l=_.Z.get("".concat(n,"?").concat(r),t)):l=_.Z.get("".concat(n),t),e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.create=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return e.t0=e.sent,_.Z.defaults.headers.common.Authorization="Basic "+e.t0,e.abrupt("return",_.Z.post(n,t));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})),$=new H;var D=h().gettext,T=h().language,U=v.forwardRef((function(e,n){return(0,S.jsx)(d.Z,(0,o.Z)({elevation:6,ref:n,variant:"filled"},e))})),V=(0,c.Ps)(B||(B=(0,i.Z)(['\n    query($locale: String,$skip: Int){\n        productCollection(locale:$locale,where:{appStore:true},limit: 100, skip: $skip) {\n            total\n            items {\n            sys { \n                id \n            }\n            key\n            hot\n            trademark\n            summary\n            overview\n            websiteurl\n            description\n            screenshots\n            distribution\n            vcpu\n            memory\n            storage\n            logo {\n                imageurl\n            }\n            catalogCollection(limit:15) {\n                items {\n                key\n                title\n                catalogCollection(limit:5){\n                    items{\n                        key\n                        title\n                    }\n                    }\n                }\n            }\n            }\n        }\n        catalog(id: "2Yp0TY3kBHgG6VDjsHZNpK",locale:$locale) {\n            linkedFrom(allowedLocales:["en-US"]) {\n            catalogCollection(limit:20) {\n                items {\n                key\n                position\n                title\n                linkedFrom(allowedLocales:["en-US"]) {\n                    catalogCollection(limit:20) {\n                    items {\n                        key\n                        title\n                        position\n                    }\n                    }\n                }\n                }\n            }\n            }\n        }\n    }\n']))),q=function(e){var n,t=e.product,l=e.showFlag,i=e.onClose,o=(0,v.useState)(0),c=(0,a.Z)(o,2),u=c[0],d=c[1],m=(0,k.s0)(),j=(0,v.useState)(!0),Z=(0,a.Z)(j,2),y=Z[0],C=Z[1],b=(0,v.useState)(""),N=(0,a.Z)(b,2),w=N[0],A=N[1],F=(0,v.useState)(!1),G=(0,a.Z)(F,2),E=G[0],I=G[1],L=(0,v.useState)(""),O=(0,a.Z)(L,2),M=O[0],_=O[1],R=(0,v.useState)(!1),z=(0,a.Z)(R,2),B=z[0],H=z[1];function T(){return(T=(0,r.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=20;break}if(!(!w||w.length<2||w.length>20)){e.next=6;break}I(!0),_(D("Please enter a custom application name between 2 and 20 characters.")),e.next=19;break;case 6:return e.prev=6,H(!0),e.next=10,l={app_name:t.key,app_version:Y,customer_app_name:w},$.get("".concat("/AppManage/AppInstall"),l);case 10:(n=e.sent).data.Error?(I(!0),_(n.data.Error.Message),H(!1)):(I(!1),_(""),h().file("/etc/hostname").watch((function(e){console.log(e)})),h().jump("/myapps"),i()),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),I(!1),_(""),m("/error-500");case 19:return e.abrupt("return");case 20:C(!y);case 21:case"end":return e.stop()}var l}),e,null,[[6,14]])})))).apply(this,arguments)}var V=((null===(n=t.distribution)||void 0===n?void 0:n.filter((function(e){return"Community"===e.key})))||[]).map((function(e){return e.value})),q=V&&1===V.length?V.toString().split(","):V,Q=(0,v.useState)(q[0]),W=(0,a.Z)(Q,2),Y=W[0],K=W[1],J=function(e,n){"clickaway"!==n&&(I(!1),_(""))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(x.Z,{show:l,onHide:i,size:"lg",scrollable:"true",backdrop:"static",children:[(0,S.jsx)(x.Z.Header,{onHide:i,closeButton:!0,children:(0,S.jsxs)("div",{style:{padding:"10px"},children:[(0,S.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,S.jsx)("img",{src:t.logo.imageurl,alt:"",className:"app-icon"})}),(0,S.jsxs)("div",{className:"col-same-height",children:[(0,S.jsx)("h4",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:t.trademark}),(0,S.jsx)("div",{children:(0,S.jsxs)("a",{rel:"noreferrer",href:"https://support.websoft9.com/docs/"+t.key,target:"_blank",style:{color:"#2196f3"},children:[t.trademark," ",D("developers")]})}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsxs)("span",{style:{marginRight:"5px"},children:[D("Version")," : "]})," ",V]}),(0,S.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,S.jsxs)("span",{style:{marginRight:"5px"},children:[D("Requires at least")," : ",t.vcpu," vCPU,  ",t.memory,"  GB memory, ",t.storage," GB storage"]})})]})]})}),(0,S.jsxs)(x.Z.Body,{children:[(0,S.jsxs)("div",{style:{display:y?"block":"none"},children:[(0,S.jsx)(f.Z,{activeIndex:u,onSelect:function(e,n){d(e)},style:{width:"80%",margin:"0 auto"},children:(t.screenshots||[]).map((function(e){return(0,S.jsx)(f.Z.Item,{children:(0,S.jsx)("img",{className:"d-block",src:null===e||void 0===e?void 0:e.value,alt:null===e||void 0===e?void 0:e.key,width:"100%",height:"300px"})},null===e||void 0===e?void 0:e.id)}))}),(0,S.jsxs)("div",{style:{padding:"10px"},children:[(0,S.jsx)("h4",{children:D("Overview")}),t.overview]}),(0,S.jsxs)("div",{style:{padding:"10px"},children:[(0,S.jsx)("h4",{children:D("Description")}),t.description]})]}),(0,S.jsx)("div",{style:{display:y?"none":"block"},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("span",{style:{marginRight:"5px"},children:[D("Version")," :"]}),q&&(0,S.jsx)(P,{name:"select",type:"select",className:"form-select",onChange:function(e){return n=e.target.value,void K(n);var n},children:(q||[]).map((function(e,n){return(0,S.jsx)("option",{value:e,children:e},e+n)}))},"select")]}),(0,S.jsxs)("div",{style:{marginTop:"5px"},children:[(0,S.jsxs)("span",{style:{marginRight:"5px"},children:[D("Name")," :"]}),(0,S.jsx)(P,{type:"text",value:w,name:"app_Name",placeholder:D("Only letters and numbers from 2 to 20 are allowed. No special characters."),onChange:function(e){!function(e){if(A(e),e){var n=e.replace(/[^a-z0-9]/gi,"").toLowerCase();A(n),I(!1),_("")}else I(!0),_(D("Please enter a custom application name between 2 and 20 characters."))}(e.target.value)}})]})]})})]}),(0,S.jsxs)(x.Z.Footer,{children:[(0,S.jsx)(g.Z,{variant:"light",onClick:i,children:D("Close")})," ",(0,S.jsx)(g.Z,{disabled:B,variant:"primary",onClick:function(){return T.apply(this,arguments)},children:D("Install")})]})]}),E&&(0,S.jsx)(p.Z,{open:E,autoHideDuration:5e3,onClose:J,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,S.jsx)(U,{onClose:J,severity:"error",sx:{width:"100%"},children:M})})]})},Q=function(){var e,n=(0,v.useState)(!1),t=(0,a.Z)(n,2),s=t[0],r=t[1],i=(0,v.useState)(null),c=(0,a.Z)(i,2),d=c[0],p=c[1],m=(0,v.useState)(null),h=(0,a.Z)(m,2),x=h[0],f=h[1],g=(0,v.useState)(null),k=(0,a.Z)(g,2),C=k[0],b=k[1],N=(0,v.useState)(!0),w=(0,a.Z)(N,2),A=w[0],F=w[1],G=(0,v.useState)(""),E=(0,a.Z)(G,2),I=E[0],O=E[1],M=(0,u.a)(V,{variables:{locale:"zh_CN"===T?"zh-CN":"en-US"}}),_=M.loading,R=M.error,z=M.data,B=M.fetchMore,H=0,$=null===z||void 0===z||null===(e=z.catalog.linkedFrom.catalogCollection.items)||void 0===e?void 0:e.sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position})),U=(0,v.useState)(null),Q=(0,a.Z)(U,2),W=Q[0],Y=Q[1],K=(0,v.useState)(null),J=(0,a.Z)(K,2),X=J[0],ee=J[1];if((0,v.useEffect)((function(){if(z){var e,n;H+=z.productCollection.items.length,z.productCollection.items.length<z.productCollection.total&&B({variables:{skip:H},updateQuery:function(e,n){var t=n.fetchMoreResult;return Object.assign({},e,{productCollection:(0,o.Z)((0,o.Z)({},t.productCollection),{},{items:[].concat((0,l.Z)(e.productCollection.items),(0,l.Z)(t.productCollection.items))})})}});var t=null===(e=z.productCollection)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.sort((function(e,n){return null===e.hot&&null===n.hot?0:null===e.hot?1:null===n.hot?-1:n.hot-e.hot}));ee(t),Y(t)}}),[z]),_)return(0,S.jsx)(L,{className:"dis_mid"});if(R)return(0,S.jsxs)("p",{children:["Error : $",R.message," "]});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(j.Z,{className:"mb-2",children:[(0,S.jsx)(Z.Z,{sm:6,children:(0,S.jsxs)(y.Z.Group,{as:j.Z,children:[(0,S.jsx)(Z.Z,{sm:6,children:(0,S.jsxs)(P,{name:"select1",type:"select",className:"form-select",onChange:function(e){return function(e){var n,t,l,s,r,a=("All"===e?[]:null===(n=$.filter((function(n){return n.key===e})))||void 0===n||null===(t=n[0])||void 0===t||null===(l=t.linkedFrom)||void 0===l||null===(s=l.catalogCollection)||void 0===s?void 0:s.items).sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position}));f(a),r=W.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))}))})),ee("All"===e?W:r),b(r),F(!1),O("")}(e.target.value)},children:[(0,S.jsx)("option",{value:"All",selected:A,children:D("All")}),($||[]).map((function(e,n){return(0,S.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select1")}),(0,S.jsx)(Z.Z,{sm:6,children:(0,S.jsxs)(P,{name:"select2",type:"select",className:"form-select",onChange:function(e){return function(e){var n;n="All"===e?C:W.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))})),ee(n),O("")}(e.target.value)},children:[(0,S.jsx)("option",{value:"All",children:D("All")}),(x||[]).map((function(e,n){return(0,S.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select2")})]})}),(0,S.jsx)(Z.Z,{sm:6,children:(0,S.jsx)(Z.Z,{xs:"auto",children:(0,S.jsx)(P,{type:"text",name:"search",placeholder:D("Search for apps like WordPress, MySQL, GitLab, \u2026"),value:I,onChange:function(e){return function(e){var n;O(e),n=""===e?W:W.filter((function(n){return n.trademark.toLowerCase().includes(e)||n.key.toLowerCase().includes(e)||n.summary.toLowerCase().includes(e)})),ee(n),F(!0),f(null)}(e.target.value)}})})})]}),(0,S.jsx)(j.Z,{children:(X||[]).map((function(e,n){return(0,S.jsx)(Z.Z,{xxl:3,sm:6,md:4,className:"appstore-item",children:(0,S.jsxs)("div",{className:"appstore-item-content highlight",onClick:function(){p(e),r(!0)},children:[(0,S.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,S.jsx)("img",{src:null===e||void 0===e?void 0:e.logo.imageurl,alt:"",className:"app-icon"})}),(0,S.jsxs)("div",{className:"col-same-height",style:{textAlign:"initial"},children:[(0,S.jsx)("h4",{className:"appstore-item-content-title",children:null===e||void 0===e?void 0:e.trademark}),(0,S.jsx)("div",{className:"appstore-item-content-tagline text-muted",children:null===e||void 0===e?void 0:e.summary})]})]})},"app-"+n)}))}),s&&(0,S.jsx)(q,{product:d,showFlag:s,onClose:function(){r(!1),p(null)}})]})}}}]);
//# sourceMappingURL=688.694c9b06.chunk.js.map