{"ast":null,"code":"import _classCallCheck from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Button,Modal}from\"@patternfly/react-core\";import cockpit from\"cockpit\";import React from\"react\";import{Terminal as Term}from\"xterm\";import{CanvasAddon}from'xterm-addon-canvas';import\"../assets/scss/custom/terminal/console.css\";import{ContextMenu}from\"./cockpit-components-context-menu\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _=cockpit.gettext;var theme_core={yellow:\"#b58900\",brightRed:\"#cb4b16\",red:\"#dc322f\",magenta:\"#d33682\",brightMagenta:\"#6c71c4\",blue:\"#268bd2\",cyan:\"#2aa198\",green:\"#859900\"};var themes={\"black-theme\":{background:\"#000000\",foreground:\"#ffffff\"},\"dark-theme\":Object.assign({},theme_core,{background:\"#002b36\",foreground:\"#fdf6e3\",cursor:\"#eee8d5\",selection:\"#ffffff77\",brightBlack:\"#002b36\",black:\"#073642\",brightGreen:\"#586e75\",brightYellow:\"#657b83\",brightBlue:\"#839496\",brightCyan:\"#93a1a1\",white:\"#eee8d5\",brightWhite:\"#fdf6e3\"}),\"light-theme\":Object.assign({},theme_core,{background:\"#fdf6e3\",foreground:\"#002b36\",cursor:\"#073642\",selection:\"#00000044\",brightWhite:\"#002b36\",white:\"#073642\",brightCyan:\"#586e75\",brightBlue:\"#657b83\",brightYellow:\"#839496\",brightGreen:\"#93a1a1\",black:\"#eee8d5\",brightBlack:\"#fdf6e3\"}),\"white-theme\":{background:\"#ffffff\",foreground:\"#000000\",selection:\"#00000044\",cursor:\"#000000\"}};export var Terminal=/*#__PURE__*/function(_React$Component){_inherits(Terminal,_React$Component);var _super=_createSuper(Terminal);function Terminal(props){var _this;_classCallCheck(this,Terminal);_this=_super.call(this,props);_this.onChannelMessage=_this.onChannelMessage.bind(_assertThisInitialized(_this));_this.onChannelClose=_this.onChannelClose.bind(_assertThisInitialized(_this));_this.connectChannel=_this.connectChannel.bind(_assertThisInitialized(_this));_this.disconnectChannel=_this.disconnectChannel.bind(_assertThisInitialized(_this));_this.reset=_this.reset.bind(_assertThisInitialized(_this));_this.focus=_this.focus.bind(_assertThisInitialized(_this));_this.onWindowResize=_this.onWindowResize.bind(_assertThisInitialized(_this));_this.resizeTerminal=_this.resizeTerminal.bind(_assertThisInitialized(_this));_this.onFocusIn=_this.onFocusIn.bind(_assertThisInitialized(_this));_this.onFocusOut=_this.onFocusOut.bind(_assertThisInitialized(_this));_this.setText=_this.setText.bind(_assertThisInitialized(_this));_this.getText=_this.getText.bind(_assertThisInitialized(_this));_this.setTerminalTheme=_this.setTerminalTheme.bind(_assertThisInitialized(_this));var term=new Term({cols:props.cols||80,rows:props.rows||25,screenKeys:true,cursorBlink:true,fontSize:props.fontSize||16,fontFamily:'Menlo, Monaco, Consolas, monospace',screenReaderMode:true,showPastingModal:false});_this.terminalRef=/*#__PURE__*/React.createRef();term.onData(function(data){if(this.props.channel.valid){this.props.channel.send(data);}}.bind(_assertThisInitialized(_this)));if(props.onTitleChanged)term.onTitleChange(props.onTitleChanged);_this.terminal=term;_this.state={showPastingModal:false,cols:props.cols||80,rows:props.rows||25};return _this;}_createClass(Terminal,[{key:\"componentDidMount\",value:function componentDidMount(){this.terminal.open(this.terminalRef.current);this.terminal.loadAddon(new CanvasAddon());this.connectChannel();if(!this.props.rows){window.addEventListener('resize',this.onWindowResize);this.onWindowResize();}this.setTerminalTheme(this.props.theme||'black-theme');this.terminal.focus();}},{key:\"resizeTerminal\",value:function resizeTerminal(cols,rows){this.terminal.resize(cols,rows);this.props.channel.control({window:{rows:rows,cols:cols}});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.fontSize!==this.props.fontSize){this.terminal.options.fontSize=this.props.fontSize;// After font size is changed, resize needs to be triggered\nvar dimensions=this.calculateDimensions();if(dimensions.cols!==this.state.cols||dimensions.rows!==this.state.rows){this.onWindowResize();}else{// When font size changes but dimensions are the same, we need to force `resize`\nthis.resizeTerminal(dimensions.cols-1,dimensions.rows);}}if(prevState.cols!==this.state.cols||prevState.rows!==this.state.rows)this.resizeTerminal(this.state.cols,this.state.rows);if(prevProps.theme!==this.props.theme)this.setTerminalTheme(this.props.theme);if(prevProps.channel!==this.props.channel){this.terminal.reset();this.disconnectChannel(prevProps.channel);this.connectChannel();this.props.channel.control({window:{rows:this.state.rows,cols:this.state.cols}});}this.terminal.focus();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Modal,{title:_(\"Paste error\"),position:\"top\",variant:\"small\",isOpen:this.state.showPastingModal,onClose:function onClose(){return _this2.setState({showPastingModal:false});},actions:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:function onClick(){return _this2.setState({showPastingModal:false});},children:_(\"Close\")},\"cancel\")],children:_(\"Your browser does not allow paste from the context menu. You can use Shift+Insert.\")}),/*#__PURE__*/_jsx(\"div\",{ref:this.terminalRef,className:\"console-ct\",onFocus:this.onFocusIn,onContextMenu:this.contextMenu,onBlur:this.onFocusOut},this.terminal),/*#__PURE__*/_jsx(ContextMenu,{parentId:this.props.parentId,setText:this.setText,getText:this.getText})]});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.disconnectChannel();this.terminal.dispose();window.removeEventListener('resize',this.onWindowResize);this.onFocusOut();}},{key:\"setText\",value:function setText(){var _this3=this;try{navigator.clipboard.readText().then(function(text){return _this3.props.channel.send(text);}).catch(function(e){return _this3.setState({showPastingModal:true});}).finally(function(){return _this3.terminal.focus();});}catch(error){this.setState({showPastingModal:true});}}},{key:\"getText\",value:function getText(){var _this4=this;try{navigator.clipboard.writeText(this.terminal.getSelection()).catch(function(e){return console.error('Text could not be copied, use Ctrl+Insert ',e?e.toString():\"\");}).finally(function(){return _this4.terminal.focus();});}catch(error){console.error('Text could not be copied, use Ctrl+Insert:',error.toString());}}},{key:\"onChannelMessage\",value:function onChannelMessage(event,data){this.terminal.write(data);}},{key:\"onChannelClose\",value:function onChannelClose(event,options){var term=this.terminal;term.write('\\x1b[31m'+(options.problem||'disconnected')+'\\x1b[m\\r\\n');term.cursorHidden=true;term.refresh(term.rows,term.rows);}},{key:\"connectChannel\",value:function connectChannel(){var channel=this.props.channel;if(channel!==null&&channel!==void 0&&channel.valid){//channel.send(\"docker exec -it mysql55 bash||sh\\n\");\nchannel.addEventListener('message',this.onChannelMessage.bind(this));channel.addEventListener('close',this.onChannelClose.bind(this));//用于打开终端时默认执行一条命令，进入容器内部\nchannel.send(this.props.runCmd);this.reset();//调用一次重置\n}}},{key:\"disconnectChannel\",value:function disconnectChannel(channel){if(channel===undefined)channel=this.props.channel;if(channel){channel.removeEventListener('message',this.onChannelMessage);channel.removeEventListener('close',this.onChannelClose);}channel.close();}},{key:\"reset\",value:function reset(){this.terminal.reset();this.props.channel.send(String.fromCharCode(12));// Send SIGWINCH to show prompt on attaching\n}},{key:\"focus\",value:function focus(){if(this.terminal)this.terminal.focus();}},{key:\"calculateDimensions\",value:function calculateDimensions(){var padding=10;// Leave a bit of space around terminal\nvar realHeight=this.terminal._core._renderService.dimensions.css.cell.height;var realWidth=this.terminal._core._renderService.dimensions.css.cell.width;if(realHeight&&realWidth&&realWidth!==0&&realHeight!==0)return{rows:Math.floor((this.terminalRef.current.parentElement.clientHeight-padding)/realHeight),cols:Math.floor((this.terminalRef.current.parentElement.clientWidth-padding-12)/realWidth)// Remove 12px for scrollbar\n};return{rows:this.state.rows,cols:this.state.cols};}},{key:\"onWindowResize\",value:function onWindowResize(){this.setState(this.calculateDimensions());}},{key:\"setTerminalTheme\",value:function setTerminalTheme(theme){this.terminal.options.theme=themes[theme];}},{key:\"onBeforeUnload\",value:function onBeforeUnload(event){// Firefox requires this when the page is in an iframe\nevent.preventDefault();// see \"an almost cross-browser solution\" at\n// https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event\nevent.returnValue='';return'';}},{key:\"onFocusIn\",value:function onFocusIn(){window.addEventListener('beforeunload',this.onBeforeUnload);}},{key:\"onFocusOut\",value:function onFocusOut(){window.removeEventListener('beforeunload',this.onBeforeUnload);}}]);return Terminal;}(React.Component);","map":{"version":3,"names":["Button","Modal","cockpit","React","Terminal","Term","CanvasAddon","ContextMenu","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","_","gettext","theme_core","yellow","brightRed","red","magenta","brightMagenta","blue","cyan","green","themes","background","foreground","Object","assign","cursor","selection","brightBlack","black","brightGreen","brightYellow","brightBlue","brightCyan","white","brightWhite","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onChannelMessage","bind","_assertThisInitialized","onChannelClose","connectChannel","disconnectChannel","reset","focus","onWindowResize","resizeTerminal","onFocusIn","onFocusOut","setText","getText","setTerminalTheme","term","cols","rows","screenKeys","cursorBlink","fontSize","fontFamily","screenReaderMode","showPastingModal","terminalRef","createRef","onData","data","channel","valid","send","onTitleChanged","onTitleChange","terminal","state","_createClass","key","value","componentDidMount","open","current","loadAddon","window","addEventListener","theme","resize","control","componentDidUpdate","prevProps","prevState","options","dimensions","calculateDimensions","render","_this2","children","title","position","variant","isOpen","onClose","setState","actions","onClick","ref","className","onFocus","onContextMenu","contextMenu","onBlur","parentId","componentWillUnmount","dispose","removeEventListener","_this3","navigator","clipboard","readText","then","text","catch","e","finally","error","_this4","writeText","getSelection","console","toString","event","write","problem","cursorHidden","refresh","runCmd","undefined","close","String","fromCharCode","padding","realHeight","_core","_renderService","css","cell","height","realWidth","width","Math","floor","parentElement","clientHeight","clientWidth","onBeforeUnload","preventDefault","returnValue","Component"],"sources":["/data/stackhub-web/plugins/myapps/src/lib/cockpit-components-terminal.js"],"sourcesContent":["import { Button, Modal } from \"@patternfly/react-core\";\nimport cockpit from \"cockpit\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { Terminal as Term } from \"xterm\";\nimport { CanvasAddon } from 'xterm-addon-canvas';\nimport \"../assets/scss/custom/terminal/console.css\";\nimport { ContextMenu } from \"./cockpit-components-context-menu\";\n\nconst _ = cockpit.gettext;\n\nconst theme_core = {\n    yellow: \"#b58900\",\n    brightRed: \"#cb4b16\",\n    red: \"#dc322f\",\n    magenta: \"#d33682\",\n    brightMagenta: \"#6c71c4\",\n    blue: \"#268bd2\",\n    cyan: \"#2aa198\",\n    green: \"#859900\"\n};\n\nconst themes = {\n    \"black-theme\": {\n        background: \"#000000\",\n        foreground: \"#ffffff\"\n    },\n    \"dark-theme\": Object.assign({}, theme_core, {\n        background: \"#002b36\",\n        foreground: \"#fdf6e3\",\n        cursor: \"#eee8d5\",\n        selection: \"#ffffff77\",\n        brightBlack: \"#002b36\",\n        black: \"#073642\",\n        brightGreen: \"#586e75\",\n        brightYellow: \"#657b83\",\n        brightBlue: \"#839496\",\n        brightCyan: \"#93a1a1\",\n        white: \"#eee8d5\",\n        brightWhite: \"#fdf6e3\"\n    }),\n    \"light-theme\": Object.assign({}, theme_core, {\n        background: \"#fdf6e3\",\n        foreground: \"#002b36\",\n        cursor: \"#073642\",\n        selection: \"#00000044\",\n        brightWhite: \"#002b36\",\n        white: \"#073642\",\n        brightCyan: \"#586e75\",\n        brightBlue: \"#657b83\",\n        brightYellow: \"#839496\",\n        brightGreen: \"#93a1a1\",\n        black: \"#eee8d5\",\n        brightBlack: \"#fdf6e3\"\n    }),\n    \"white-theme\": {\n        background: \"#ffffff\",\n        foreground: \"#000000\",\n        selection: \"#00000044\",\n        cursor: \"#000000\",\n    },\n};\n\nexport class Terminal extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onChannelMessage = this.onChannelMessage.bind(this);\n        this.onChannelClose = this.onChannelClose.bind(this);\n        this.connectChannel = this.connectChannel.bind(this);\n        this.disconnectChannel = this.disconnectChannel.bind(this);\n        this.reset = this.reset.bind(this);\n        this.focus = this.focus.bind(this);\n        this.onWindowResize = this.onWindowResize.bind(this);\n        this.resizeTerminal = this.resizeTerminal.bind(this);\n        this.onFocusIn = this.onFocusIn.bind(this);\n        this.onFocusOut = this.onFocusOut.bind(this);\n        this.setText = this.setText.bind(this);\n        this.getText = this.getText.bind(this);\n        this.setTerminalTheme = this.setTerminalTheme.bind(this);\n\n        const term = new Term({\n            cols: props.cols || 80,\n            rows: props.rows || 25,\n            screenKeys: true,\n            cursorBlink: true,\n            fontSize: props.fontSize || 16,\n            fontFamily: 'Menlo, Monaco, Consolas, monospace',\n            screenReaderMode: true,\n            showPastingModal: false,\n        });\n\n        this.terminalRef = React.createRef();\n\n        term.onData(function (data) {\n            if (this.props.channel.valid) {\n                this.props.channel.send(data);\n            }\n        }.bind(this));\n\n        if (props.onTitleChanged)\n            term.onTitleChange(props.onTitleChanged);\n\n        this.terminal = term;\n        this.state = {\n            showPastingModal: false,\n            cols: props.cols || 80,\n            rows: props.rows || 25\n        };\n    }\n\n    componentDidMount() {\n        this.terminal.open(this.terminalRef.current);\n        this.terminal.loadAddon(new CanvasAddon());\n\n        this.connectChannel();\n\n        if (!this.props.rows) {\n            window.addEventListener('resize', this.onWindowResize);\n            this.onWindowResize();\n        }\n        this.setTerminalTheme(this.props.theme || 'black-theme');\n        this.terminal.focus();\n    }\n\n    resizeTerminal(cols, rows) {\n        this.terminal.resize(cols, rows);\n        this.props.channel.control({\n            window: {\n                rows,\n                cols\n            }\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.fontSize !== this.props.fontSize) {\n            this.terminal.options.fontSize = this.props.fontSize;\n\n            // After font size is changed, resize needs to be triggered\n            const dimensions = this.calculateDimensions();\n            if (dimensions.cols !== this.state.cols || dimensions.rows !== this.state.rows) {\n                this.onWindowResize();\n            } else {\n                // When font size changes but dimensions are the same, we need to force `resize`\n                this.resizeTerminal(dimensions.cols - 1, dimensions.rows);\n            }\n        }\n\n        if (prevState.cols !== this.state.cols || prevState.rows !== this.state.rows)\n            this.resizeTerminal(this.state.cols, this.state.rows);\n\n        if (prevProps.theme !== this.props.theme)\n            this.setTerminalTheme(this.props.theme);\n\n        if (prevProps.channel !== this.props.channel) {\n            this.terminal.reset();\n            this.disconnectChannel(prevProps.channel);\n            this.connectChannel();\n            this.props.channel.control({\n                window: {\n                    rows: this.state.rows,\n                    cols: this.state.cols\n                }\n            });\n        }\n        this.terminal.focus();\n    }\n\n    render() {\n        return (\n            <>\n                <Modal title={_(\"Paste error\")}\n                    position=\"top\"\n                    variant=\"small\"\n                    isOpen={this.state.showPastingModal}\n                    onClose={() => this.setState({ showPastingModal: false })}\n                    actions={[\n                        <Button key=\"cancel\" variant=\"secondary\" onClick={() => this.setState({ showPastingModal: false })}>\n                            {_(\"Close\")}\n                        </Button>\n                    ]}>\n                    {_(\"Your browser does not allow paste from the context menu. You can use Shift+Insert.\")}\n                </Modal>\n                <div ref={this.terminalRef}\n                    key={this.terminal}\n                    className=\"console-ct\"\n                    onFocus={this.onFocusIn}\n                    onContextMenu={this.contextMenu}\n                    onBlur={this.onFocusOut} />\n                <ContextMenu parentId={this.props.parentId} setText={this.setText} getText={this.getText} />\n            </>\n        );\n    }\n\n    componentWillUnmount() {\n        this.disconnectChannel();\n        this.terminal.dispose();\n        window.removeEventListener('resize', this.onWindowResize);\n        this.onFocusOut();\n    }\n\n    setText() {\n        try {\n            navigator.clipboard.readText()\n                .then(text => this.props.channel.send(text))\n                .catch(e => this.setState({ showPastingModal: true }))\n                .finally(() => this.terminal.focus());\n        } catch (error) {\n            this.setState({ showPastingModal: true });\n        }\n    }\n\n    getText() {\n        try {\n            navigator.clipboard.writeText(this.terminal.getSelection())\n                .catch(e => console.error('Text could not be copied, use Ctrl+Insert ', e ? e.toString() : \"\"))\n                .finally(() => this.terminal.focus());\n        } catch (error) {\n            console.error('Text could not be copied, use Ctrl+Insert:', error.toString());\n        }\n    }\n\n    onChannelMessage(event, data) {\n        this.terminal.write(data);\n    }\n\n    onChannelClose(event, options) {\n        const term = this.terminal;\n        term.write('\\x1b[31m' + (options.problem || 'disconnected') + '\\x1b[m\\r\\n');\n        term.cursorHidden = true;\n        term.refresh(term.rows, term.rows);\n    }\n\n    connectChannel() {\n        const channel = this.props.channel;\n        if (channel?.valid) {\n            //channel.send(\"docker exec -it mysql55 bash||sh\\n\");\n\n            channel.addEventListener('message', this.onChannelMessage.bind(this));\n            channel.addEventListener('close', this.onChannelClose.bind(this));\n\n            //用于打开终端时默认执行一条命令，进入容器内部\n            channel.send(this.props.runCmd);\n            this.reset();//调用一次重置\n        }\n    }\n\n    disconnectChannel(channel) {\n        if (channel === undefined)\n            channel = this.props.channel;\n        if (channel) {\n            channel.removeEventListener('message', this.onChannelMessage);\n            channel.removeEventListener('close', this.onChannelClose);\n        }\n        channel.close();\n    }\n\n    reset() {\n        this.terminal.reset();\n        this.props.channel.send(String.fromCharCode(12)); // Send SIGWINCH to show prompt on attaching\n    }\n\n    focus() {\n        if (this.terminal)\n            this.terminal.focus();\n    }\n\n    calculateDimensions() {\n        const padding = 10; // Leave a bit of space around terminal\n        const realHeight = this.terminal._core._renderService.dimensions.css.cell.height;\n        const realWidth = this.terminal._core._renderService.dimensions.css.cell.width;\n        if (realHeight && realWidth && realWidth !== 0 && realHeight !== 0)\n            return {\n                rows: Math.floor((this.terminalRef.current.parentElement.clientHeight - padding) / realHeight),\n                cols: Math.floor((this.terminalRef.current.parentElement.clientWidth - padding - 12) / realWidth) // Remove 12px for scrollbar\n            };\n\n        return { rows: this.state.rows, cols: this.state.cols };\n    }\n\n    onWindowResize() {\n        this.setState(this.calculateDimensions());\n    }\n\n    setTerminalTheme(theme) {\n        this.terminal.options.theme = themes[theme];\n    }\n\n    onBeforeUnload(event) {\n        // Firefox requires this when the page is in an iframe\n        event.preventDefault();\n\n        // see \"an almost cross-browser solution\" at\n        // https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event\n        event.returnValue = '';\n        return '';\n    }\n\n    onFocusIn() {\n        window.addEventListener('beforeunload', this.onBeforeUnload);\n    }\n\n    onFocusOut() {\n        window.removeEventListener('beforeunload', this.onBeforeUnload);\n    }\n}\n\nTerminal.propTypes = {\n    cols: PropTypes.number,\n    rows: PropTypes.number,\n    channel: PropTypes.object.isRequired,\n    onTitleChanged: PropTypes.func,\n    theme: PropTypes.string,\n    parentId: PropTypes.string.isRequired\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}