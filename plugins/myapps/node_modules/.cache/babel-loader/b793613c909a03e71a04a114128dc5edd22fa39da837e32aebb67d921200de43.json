{"ast":null,"code":"import _regeneratorRuntime from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/data/stackhub-web/plugins/myapps/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import MuiAlert from'@mui/material/Alert';import Snackbar from'@mui/material/Snackbar';import classNames from'classnames';import cockpit from'cockpit';import React,{useEffect,useRef,useState}from'react';import{Alert,Button,Col,Dropdown,Modal,Row}from'react-bootstrap';import{Link,Navigate,useNavigate}from'react-router-dom';import DefaultImg from'../assets/images/default.png';import FormInput from'../components/FormInput';import Spinner from'../components/Spinner';import{AppList,AppRestart,AppStart,AppStop,AppUninstall}from'../helpers';import AppDetailModal from'./appdetail';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _=cockpit.gettext;var MyMuiAlert=/*#__PURE__*/React.forwardRef(function Alert(props,ref){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,ref:ref,variant:\"filled\"},props));});//应用状态为failed时，显示错误消息\nvar ErrorInfoModal=function ErrorInfoModal(props){return/*#__PURE__*/_jsxs(Modal,{show:props.showConform,onHide:props.onClose,size:\"lg\",scrollable:\"true\",backdrop:\"static\",children:[/*#__PURE__*/_jsx(Modal.Header,{onHide:props.onClose,closeButton:true,className:classNames('modal-colored-header','bg-danger'),children:/*#__PURE__*/_jsxs(\"h4\",{children:[_(\"This is the error message for\"),\" \",props.app.customer_name]})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"row\",children:props.app.status_reason&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"10px 0px\"},children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:_(\"Code: \")}),props.app.status_reason.Code,\" \"]}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"10px 0px\"},children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:_(\"Message: \")}),props.app.status_reason.Message,\" \"]}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"10px 0px\"},children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:_(\"Detail: \")}),props.app.status_reason.Detail,\" \"]})]})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:props.onClose,children:_(\"Close\")}),/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return window.open('https://www.websoft9.com/ticket','_blank');},children:_(\"Support\")})]})]});};//删除应用弹窗\nvar UninstallConform=function UninstallConform(props){var navigate=useNavigate();//用于页面跳转\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),disable=_useState2[0],setDisable=_useState2[1];//用于按钮禁用\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showAlert=_useState4[0],setShowAlert=_useState4[1];//用于是否显示错误提示\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),alertMessage=_useState6[0],setAlertMessage=_useState6[1];//用于显示错误提示消息\nfunction closeAllModals(){//关闭所有弹窗\nprops.onClose();props.onDataChange();}return/*#__PURE__*/_jsxs(Modal,{show:props.showConform,onHide:props.onClose,size:\"lg\",scrollable:\"true\",backdrop:\"static\",children:[/*#__PURE__*/_jsx(Modal.Header,{onHide:props.onClose,className:classNames('modal-colored-header','bg-warning'),children:/*#__PURE__*/_jsxs(\"h4\",{children:[_(\"Remove\"),\" \",props.app.customer_name]})}),/*#__PURE__*/_jsxs(Modal.Body,{className:\"row\",children:[/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"10px 0px\"},children:[_(\"This will immediately remove\"),\" \",props.app.customer_name,\" \",_(\"and remove all its data.\")]}),/*#__PURE__*/_jsx(\"div\",{children:showAlert&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"my-2\",children:alertMessage})})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:props.onClose,children:_(\"Close\")}),\" \",/*#__PURE__*/_jsxs(Button,{disabled:disable,variant:\"warning\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setDisable(true);//调用卸载应用接口\n_context.next=4;return AppUninstall({app_id:props.app.app_id});case 4:response=_context.sent;if(response.data.Error){setShowAlert(true);setAlertMessage(response.data.Error.Message);}else{closeAllModals();//关闭弹窗并更新数据\n}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);navigate(\"/error-500\");case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);})),children:[disable&&/*#__PURE__*/_jsx(Spinner,{className:\"spinner-border-sm me-1\",tag:\"span\",color:\"white\"}),\" \",_(\"Remove\")]})]})]});};var MyApps=function MyApps(){var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showModal=_useState8[0],setShowModal=_useState8[1];//用于显示状态为running或exited弹窗的标识\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showUninstallConform=_useState10[0],setShowUninstallConform=_useState10[1];//用于显示状态为failed时显示确定删除的弹窗\nvar _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showErrorInfo=_useState12[0],setShowErrorInfo=_useState12[1];//用于显示状态为failed时显示错误消息的弹窗\nvar _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showOtherAppModal=_useState14[0],setShowOtherAppModal=_useState14[1];//用于显示非websoft9应用的的弹窗的标识\nvar _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isLoading=_useState16[0],setIsLoading=_useState16[1];//用于非官方应用启动 停止 重启 卸载时，显示加载中\nvar _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showAlert=_useState18[0],setShowAlert=_useState18[1];//用于是否显示错误提示\nvar _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),alertMessage=_useState20[0],setAlertMessage=_useState20[1];//用于显示错误提示消息\nvar _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),alertType=_useState22[0],setAlertType=_useState22[1];//用于确定弹窗的类型：error\\success\nvar _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),selectedApp=_useState24[0],setSelectedApp=_useState24[1];//用于存储被选中的产品（点击应用详情时使用）\nvar _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),apps=_useState26[0],setApps=_useState26[1];//所有“我的应用”\nvar _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),statusApps=_useState28[0],setStatusApps=_useState28[1];//根据状态筛选的应用\nvar _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),searchString=_useState30[0],setSearchString=_useState30[1];//用户输入的筛选字符串\nvar _useState31=useState(\"all\"),_useState32=_slicedToArray(_useState31,2),selectedStatus=_useState32[0],setSelectedStatus=_useState32[1];//用于存储用户筛选应用状态的标识\nvar _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),progressId=_useState34[0],setProgressId=_useState34[1];//用于存储当前正在安装的应用ID，用于做进度查询的参数\nvar selectedAppRef=useRef(selectedApp);var navigate=useNavigate();//用于页面跳转\nvar _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),code=_useState36[0],setCode=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),error=_useState38[0],setError=_useState38[1];var _useState39=useState(null),_useState40=_slicedToArray(_useState39,2),errorDetails=_useState40[0],setErrorDetails=_useState40[1];var _useState41=useState(false),_useState42=_slicedToArray(_useState41,2),loading=_useState42[0],setLoading=_useState42[1];var menuItems=function menuItems(appStatus){return[{label:'Stop',icon:'dripicons-power noti-icon',condition:appStatus===\"running\"},{label:'Start',icon:'dripicons-media-play noti-icon',condition:appStatus===\"exited\"},{label:'Restart',icon:'dripicons-clockwise noti-icon',condition:appStatus===\"running\"||appStatus===\"exited\"},{label:'Uninstall',icon:'dripicons-trash noti-icon',variant:'text-danger',hasDivider:true,condition:true}];};var timer;//获取所有已安装的App(只执行一次)\nvar getAllAppsOnce=function getAllAppsOnce(){AppList().then(function(response){if(response.data.Error){setCode(response.data.Error.Code);setError(response.data.Error.Message);setErrorDetails(response.data.Error.Details);}else{var newApps=response.data.ResponseData;setApps(newApps);if(selectedAppRef.current){var updatedApp=newApps.find(function(app){return app.app_id===selectedAppRef.current.app_id;});setSelectedApp(updatedApp);}}setLoading(false);}).catch(function(error){/*#__PURE__*/_jsx(Navigate,{to:\"/error-500\"});});};//获取所有已安装的App(每隔5秒执行一次)\nvar getAllApps=function getAllApps(){setLoading(true);//调用接口获取已经安装应用\ntimer=setInterval(function(){AppList().then(function(response){if(response.data.Error){setCode(response.data.Error.Code);setError(response.data.Error.Message);setErrorDetails(response.data.Error.Details);}else{var newApps=response.data.ResponseData;setApps(newApps);if(selectedAppRef.current){var updatedApp=newApps.find(function(app){return app.app_id===selectedAppRef.current.app_id;});setSelectedApp(updatedApp);}}setLoading(false);}).catch(function(error){/*#__PURE__*/_jsx(Navigate,{to:\"/error-500\"});});},5000);return function(){return clearInterval(timer);};};useEffect(function(){getAllAppsOnce();},[]);useEffect(function(){getAllApps();},[]);useEffect(function(){selectedAppRef.current=selectedApp;},[selectedApp]);useEffect(function(){return function(){return clearInterval(timer);};//用于清除定时器\n},[]);if(loading)return/*#__PURE__*/_jsx(Spinner,{className:\"dis_mid\"});if(code)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Code : $\",code,\" \"]});if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error : $\",error,\" \"]});//用于根据应用“状态”过滤应用\nvar changeStatus=function changeStatus(selectedStatus){setSelectedStatus(selectedStatus);};//用于根据用户输入搜索应用\nvar handleInputChange=function handleInputChange(searchString){setSearchString(searchString);};//用于用户点击应用详情\nvar handleClick=function handleClick(app){setSelectedApp(app);setShowModal(true);};//用于应用为failed时删除应用\nvar deleteApp=function deleteApp(app){setSelectedApp(app);setShowUninstallConform(true);};//用于应用为failed时显示错误信息弹窗\nvar showError=function showError(app){setSelectedApp(app);setShowErrorInfo(true);};//用于关闭显示错误消息弹窗\nvar cancelShowError=function cancelShowError(){setShowErrorInfo(false);};//用于取消删除应用\nvar canceldeleteApp=function canceldeleteApp(){setShowUninstallConform(false);};//用于关闭应用详情的弹窗\nvar handleClose=function handleClose(){setShowModal(false);setSelectedApp(null);};var handleAlertClose=function handleAlertClose(event,reason){if(reason==='clickaway'){return;}setShowAlert(false);setAlertMessage(\"\");};//用于立即刷新数据\nvar handleDataChange=function handleDataChange(){getAllAppsOnce();};//非官方应用的操作\nvar appActions={\"Stop\":{api:AppStop},\"Start\":{api:AppStart},\"Restart\":{api:AppRestart},\"Uninstall\":{api:AppUninstall}};//处理非官方应用的操作\nvar NoOfficialAppClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(label,app){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(label===\"Uninstall\")){_context2.next=4;break;}setSelectedApp(app);setShowUninstallConform(true);return _context2.abrupt(\"return\");case 4:setIsLoading(true);_context2.prev=5;_context2.next=8;return appActions[label].api({app_id:app.app_id});case 8:response=_context2.sent;if(response.data.Error){setShowAlert(true);setAlertType(\"error\");setAlertMessage(response.data.Error.Message);}else{setShowAlert(true);setAlertType(\"success\");setAlertMessage(\"执行成功\");handleDataChange();}_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](5);navigate(\"/error-500\");case 15:_context2.prev=15;setIsLoading(false);return _context2.finish(15);case 18:case\"end\":return _context2.stop();}},_callee2,null,[[5,12,15,18]]);}));return function NoOfficialAppClick(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-2 align-items-center\",children:[/*#__PURE__*/_jsx(Col,{xs:12,sm:6,md:3,lg:2,children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"28px\"},children:_(\"My Apps\")})}),/*#__PURE__*/_jsx(Col,{xs:12,sm:6,md:3,lg:2,children:/*#__PURE__*/_jsxs(FormInput,{value:selectedStatus,name:\"select\",type:\"select\",className:\"form-select\",onChange:function onChange(e){return changeStatus(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All States\"}),/*#__PURE__*/_jsx(\"option\",{value:\"installing\",children:\"installing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"running\",children:\"running\"}),/*#__PURE__*/_jsx(\"option\",{value:\"exited\",children:\"exited\"}),/*#__PURE__*/_jsx(\"option\",{value:\"restarting\",children:\"restarting\"}),/*#__PURE__*/_jsx(\"option\",{value:\"failed\",children:\"failed\"})]},\"select\")}),/*#__PURE__*/_jsx(Col,{xs:12,sm:12,md:6,lg:7,children:/*#__PURE__*/_jsx(FormInput,{type:\"text\",name:\"search\",placeholder:\"Search for apps like WordPress, Dropbox, Slack, Trello, \\u2026\",onChange:function onChange(e){return handleInputChange(e.target.value);}})}),/*#__PURE__*/_jsx(Col,{xs:12,sm:12,md:12,lg:1,children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"float-end\",onClick:function onClick(){window.location.reload(false);},children:_(\"Refresh\")})})]}),[true,false].map(function(official_app){// 过滤出符合条件的apps\nvar filteredApps=apps.filter(function(app){return selectedStatus==='all'||app.status===selectedStatus;}).filter(function(app){return app.official_app===official_app;}).filter(function(app){return app.customer_name.includes(searchString);});// 如果有数据，返回一个Row组件，否则返回null\nreturn filteredApps.length>0?/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(\"h4\",{style:official_app?{}:{paddingTop:\"10px\"},children:official_app?_(\"Websoft9's Apps\"):_(\"Other Apps\")}),filteredApps.map(function(app,i){return/*#__PURE__*/_jsx(Col,{xxl:2,md:3,className:\"appstore-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"appstore-item-content highlight text-align-center\",children:[!official_app&&(app.status===\"running\"||app.status===\"exited\")&&/*#__PURE__*/_jsxs(Dropdown,{className:\"float-end\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{as:Link,to:\"#\",className:\"arrow-none card-drop\",children:isLoading?/*#__PURE__*/_jsx(Spinner,{className:\"spinner-border-sm noti-icon\"}):/*#__PURE__*/_jsx(\"i\",{className:\"dripicons-gear noti-icon\"})}),/*#__PURE__*/_jsx(Dropdown.Menu,{align:\"end\",children:(menuItems(app.status)||[]).map(function(item,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[item.condition&&item.hasDivider&&/*#__PURE__*/_jsx(Dropdown.Divider,{as:\"div\"}),item.condition&&/*#__PURE__*/_jsxs(Dropdown.Item,{className:classNames(item.variant?item.variant:''),onClick:function onClick(){return NoOfficialAppClick(item.label,app);},children:[item.icon&&/*#__PURE__*/_jsx(\"i\",{className:classNames(item.icon,'me-1')}),item.label]})]},index);})})]}),official_app&&(app.status===\"running\"||app.status===\"exited\")&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"float-end arrow-none card-drop p-0\",onClick:function onClick(){handleClick(app);},children:/*#__PURE__*/_jsx(\"i\",{className:\"dripicons-gear noti-icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]}),official_app&&app.status===\"installing\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"float-end arrow-none card-drop p-0\",children:/*#__PURE__*/_jsx(\"i\",{className:\"dripicons-empty noti-icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]}),app.status==='failed'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"float-end arrow-none card-drop p-0\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"dripicons-information noti-icon\",style:{paddingRight:\"10px\"},onClick:function onClick(){showError(app);}}),/*#__PURE__*/_jsx(\"i\",{className:\"dripicons-trash noti-icon\",onClick:function onClick(){deleteApp(app);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:app.image_url,alt:app.app_name,className:\"app-icon\",style:{margin:\"20px 10px 20px 10px\"},onError:function onError(e){return e.target.src=DefaultImg;}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"appstore-item-content-title\",style:{color:\"#2196f3\"},children:app.customer_name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:app.status==='failed'?'red':'inherit',display:'flex',alignItems:'center',justifyContent:'center'},children:[app.status&&app.status===\"installing\"&&/*#__PURE__*/_jsx(Spinner,{className:\"spinner-border-sm m-2\"}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"m-2\",children:app.status})]})]})]})},app.app_id+i);})]}):null;}),showModal&&/*#__PURE__*/_jsx(AppDetailModal,{current_app:selectedApp,showFlag:showModal,onClose:handleClose,onDataChange:handleDataChange}),showUninstallConform&&/*#__PURE__*/_jsx(UninstallConform,{showConform:showUninstallConform,onClose:canceldeleteApp,app:selectedApp,onDataChange:handleDataChange}),showErrorInfo&&/*#__PURE__*/_jsx(ErrorInfoModal,{showConform:showErrorInfo,onClose:cancelShowError,app:selectedApp}),showAlert&&/*#__PURE__*/_jsx(Snackbar,{open:showAlert,autoHideDuration:5000,onClose:handleAlertClose,anchorOrigin:{vertical:'top',horizontal:'center'},children:/*#__PURE__*/_jsx(MyMuiAlert,{onClose:handleAlertClose,severity:alertType,sx:{width:'100%'},children:alertMessage})})]});};export default MyApps;","map":{"version":3,"names":["MuiAlert","Snackbar","classNames","cockpit","React","useEffect","useRef","useState","Alert","Button","Col","Dropdown","Modal","Row","Link","Navigate","useNavigate","DefaultImg","FormInput","Spinner","AppList","AppRestart","AppStart","AppStop","AppUninstall","AppDetailModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","_","gettext","MyMuiAlert","forwardRef","props","ref","_objectSpread","elevation","variant","ErrorInfoModal","show","showConform","onHide","onClose","size","scrollable","backdrop","children","Header","closeButton","className","app","customer_name","Body","status_reason","style","margin","Code","Message","Detail","Footer","onClick","window","open","UninstallConform","navigate","_useState","_useState2","_slicedToArray","disable","setDisable","_useState3","_useState4","showAlert","setShowAlert","_useState5","_useState6","alertMessage","setAlertMessage","closeAllModals","onDataChange","disabled","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","app_id","sent","data","Error","t0","stop","tag","color","MyApps","_useState7","_useState8","showModal","setShowModal","_useState9","_useState10","showUninstallConform","setShowUninstallConform","_useState11","_useState12","showErrorInfo","setShowErrorInfo","_useState13","_useState14","showOtherAppModal","setShowOtherAppModal","_useState15","_useState16","isLoading","setIsLoading","_useState17","_useState18","_useState19","_useState20","_useState21","_useState22","alertType","setAlertType","_useState23","_useState24","selectedApp","setSelectedApp","_useState25","_useState26","apps","setApps","_useState27","_useState28","statusApps","setStatusApps","_useState29","_useState30","searchString","setSearchString","_useState31","_useState32","selectedStatus","setSelectedStatus","_useState33","_useState34","progressId","setProgressId","selectedAppRef","_useState35","_useState36","code","setCode","_useState37","_useState38","error","setError","_useState39","_useState40","errorDetails","setErrorDetails","_useState41","_useState42","loading","setLoading","menuItems","appStatus","label","icon","condition","hasDivider","timer","getAllAppsOnce","then","Details","newApps","ResponseData","current","updatedApp","find","catch","to","getAllApps","setInterval","clearInterval","changeStatus","handleInputChange","handleClick","deleteApp","showError","cancelShowError","canceldeleteApp","handleClose","handleAlertClose","event","reason","handleDataChange","appActions","api","NoOfficialAppClick","_ref2","_callee2","_callee2$","_context2","abrupt","finish","_x","_x2","apply","arguments","xs","sm","md","lg","fontSize","value","name","type","onChange","e","target","placeholder","location","reload","map","official_app","filteredApps","filter","status","includes","length","paddingTop","i","xxl","Toggle","as","Menu","align","item","index","Divider","Item","paddingRight","src","image_url","alt","app_name","onError","display","alignItems","justifyContent","current_app","showFlag","autoHideDuration","anchorOrigin","vertical","horizontal","severity","sx","width"],"sources":["/data/stackhub-web/plugins/myapps/src/pages/myapps.js"],"sourcesContent":["import MuiAlert from '@mui/material/Alert';\nimport Snackbar from '@mui/material/Snackbar';\nimport classNames from 'classnames';\nimport cockpit from 'cockpit';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Alert, Button, Col, Dropdown, Modal, Row } from 'react-bootstrap';\nimport { Link, Navigate, useNavigate } from 'react-router-dom';\nimport DefaultImg from '../assets/images/default.png';\nimport FormInput from '../components/FormInput';\nimport Spinner from '../components/Spinner';\nimport { AppList, AppRestart, AppStart, AppStop, AppUninstall } from '../helpers';\nimport AppDetailModal from './appdetail';\n\nconst _ = cockpit.gettext;\n\nconst MyMuiAlert = React.forwardRef(function Alert(props, ref) {\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\n\n//应用状态为failed时，显示错误消息\nconst ErrorInfoModal = (props): React$Element<React$FragmentType> => {\n    return (\n        <Modal show={props.showConform} onHide={props.onClose} size=\"lg\" scrollable=\"true\" backdrop=\"static\">\n            <Modal.Header onHide={props.onClose} closeButton className={classNames('modal-colored-header', 'bg-danger')}>\n                <h4>{_(\"This is the error message for\")} {props.app.customer_name}</h4>\n            </Modal.Header>\n            <Modal.Body className=\"row\" >\n                {\n                    props.app.status_reason &&\n                    <>\n                        <span style={{ margin: \"10px 0px\" }}> <b>{_(\"Code: \")}</b>{props.app.status_reason.Code} </span>\n                        <span style={{ margin: \"10px 0px\" }}> <b>{_(\"Message: \")}</b>{props.app.status_reason.Message} </span>\n                        <span style={{ margin: \"10px 0px\" }}> <b>{_(\"Detail: \")}</b>{props.app.status_reason.Detail} </span>\n                    </>\n                }\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"light\" onClick={props.onClose}>\n                    {_(\"Close\")}\n                </Button>\n                <Button variant=\"light\" onClick={() => window.open('https://www.websoft9.com/ticket', '_blank')}>\n                    {_(\"Support\")}\n                </Button>\n            </Modal.Footer>\n        </Modal >\n    );\n}\n\n//删除应用弹窗\nconst UninstallConform = (props): React$Element<React$FragmentType> => {\n    const navigate = useNavigate(); //用于页面跳转\n    const [disable, setDisable] = useState(false);//用于按钮禁用\n    const [showAlert, setShowAlert] = useState(false); //用于是否显示错误提示\n    const [alertMessage, setAlertMessage] = useState(\"\");//用于显示错误提示消息\n\n    function closeAllModals() {\n        //关闭所有弹窗\n        props.onClose();\n        props.onDataChange();\n    }\n\n    return (\n        <Modal show={props.showConform} onHide={props.onClose} size=\"lg\"\n            scrollable=\"true\" backdrop=\"static\">\n            <Modal.Header onHide={props.onClose} className={classNames('modal-colored-header', 'bg-warning')}>\n                <h4>{_(\"Remove\")} {props.app.customer_name}</h4>\n            </Modal.Header>\n            <Modal.Body className=\"row\" >\n                <span style={{ margin: \"10px 0px\" }}>{_(\"This will immediately remove\")} {props.app.customer_name} {_(\"and remove all its data.\")}</span>\n                <div>\n                    {showAlert && <Alert variant=\"danger\" className=\"my-2\">\n                        {alertMessage}\n                    </Alert>}\n                </div>\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"light\" onClick={props.onClose}>\n                    {_(\"Close\")}\n                </Button>{\" \"}\n                <Button disabled={disable} variant=\"warning\" onClick={async () => {\n                    try {\n                        setDisable(true);\n                        //调用卸载应用接口\n                        const response = await AppUninstall({ app_id: props.app.app_id });\n                        if (response.data.Error) {\n                            setShowAlert(true);\n                            setAlertMessage(response.data.Error.Message);\n                        }\n                        else {\n                            closeAllModals(); //关闭弹窗并更新数据\n                        }\n                    }\n                    catch (error) {\n                        navigate(\"/error-500\");\n                    }\n                }}>\n                    {disable && <Spinner className=\"spinner-border-sm me-1\" tag=\"span\" color=\"white\" />} {_(\"Remove\")}\n                </Button>\n            </Modal.Footer>\n        </Modal >\n    );\n}\n\nconst MyApps = (): React$Element<React$FragmentType> => {\n    const [showModal, setShowModal] = useState(false); //用于显示状态为running或exited弹窗的标识\n    const [showUninstallConform, setShowUninstallConform] = useState(false); //用于显示状态为failed时显示确定删除的弹窗\n    const [showErrorInfo, setShowErrorInfo] = useState(false); //用于显示状态为failed时显示错误消息的弹窗\n    const [showOtherAppModal, setShowOtherAppModal] = useState(false); //用于显示非websoft9应用的的弹窗的标识\n    const [isLoading, setIsLoading] = useState(false); //用于非官方应用启动 停止 重启 卸载时，显示加载中\n    const [showAlert, setShowAlert] = useState(false); //用于是否显示错误提示\n    const [alertMessage, setAlertMessage] = useState(\"\");//用于显示错误提示消息\n    const [alertType, setAlertType] = useState(\"\");//用于确定弹窗的类型：error\\success\n\n    const [selectedApp, setSelectedApp] = useState(null); //用于存储被选中的产品（点击应用详情时使用）\n    const [apps, setApps] = useState([]); //所有“我的应用”\n    const [statusApps, setStatusApps] = useState([]);//根据状态筛选的应用\n    const [searchString, setSearchString] = useState(\"\");//用户输入的筛选字符串\n    const [selectedStatus, setSelectedStatus] = useState(\"all\"); //用于存储用户筛选应用状态的标识\n    const [progressId, setProgressId] = useState([]); //用于存储当前正在安装的应用ID，用于做进度查询的参数\n\n    const selectedAppRef = useRef(selectedApp);\n    const navigate = useNavigate(); //用于页面跳转\n\n    const [code, setCode] = useState(0);\n    const [error, setError] = useState(null);\n    const [errorDetails, setErrorDetails] = useState(null)\n    const [loading, setLoading] = useState(false);\n\n    const menuItems = (appStatus) => {\n        return [\n            { label: 'Stop', icon: 'dripicons-power noti-icon', condition: appStatus === \"running\" },\n            { label: 'Start', icon: 'dripicons-media-play noti-icon', condition: appStatus === \"exited\" },\n            { label: 'Restart', icon: 'dripicons-clockwise noti-icon', condition: appStatus === \"running\" || appStatus === \"exited\" },\n            {\n                label: 'Uninstall',\n                icon: 'dripicons-trash noti-icon',\n                variant: 'text-danger',\n                hasDivider: true,\n                condition: true\n            }\n        ]\n    };\n\n    let timer;\n\n    //获取所有已安装的App(只执行一次)\n    const getAllAppsOnce = () => {\n        AppList().then((response) => {\n            if (response.data.Error) {\n                setCode(response.data.Error.Code);\n                setError(response.data.Error.Message);\n                setErrorDetails(response.data.Error.Details);\n            }\n            else {\n                const newApps = response.data.ResponseData;\n                setApps(newApps);\n                if (selectedAppRef.current) {\n                    const updatedApp = newApps.find(\n                        (app) => app.app_id === selectedAppRef.current.app_id\n                    );\n                    setSelectedApp(updatedApp);\n                }\n            }\n            setLoading(false);\n        }).catch((error) => {\n            <Navigate to=\"/error-500\" />\n        });\n    }\n\n    //获取所有已安装的App(每隔5秒执行一次)\n    const getAllApps = () => {\n        setLoading(true);\n        //调用接口获取已经安装应用\n        timer = setInterval(() => {\n            AppList().then((response) => {\n                if (response.data.Error) {\n                    setCode(response.data.Error.Code);\n                    setError(response.data.Error.Message);\n                    setErrorDetails(response.data.Error.Details);\n                }\n                else {\n                    const newApps = response.data.ResponseData;\n                    setApps(newApps);\n                    if (selectedAppRef.current) {\n                        const updatedApp = newApps.find(\n                            (app) => app.app_id === selectedAppRef.current.app_id\n                        );\n                        setSelectedApp(updatedApp);\n                    }\n                }\n                setLoading(false);\n            }).catch((error) => {\n                <Navigate to=\"/error-500\" />\n            });\n        }, 5000);\n        return () => clearInterval(timer);\n    }\n\n    useEffect(() => {\n        getAllAppsOnce();\n    }, []);\n\n    useEffect(() => {\n        getAllApps();\n    }, []);\n\n    useEffect(() => {\n        selectedAppRef.current = selectedApp;\n    }, [selectedApp]);\n\n    useEffect(() => {\n        return () => clearInterval(timer);  //用于清除定时器\n    }, []);\n\n    if (loading) return <Spinner className='dis_mid' />;\n    if (code) return <p>Code : ${code} </p>;\n    if (error) return <p>Error : ${error} </p>;\n\n    //用于根据应用“状态”过滤应用\n    const changeStatus = (selectedStatus) => {\n        setSelectedStatus(selectedStatus);\n    };\n\n    //用于根据用户输入搜索应用\n    const handleInputChange = (searchString) => {\n        setSearchString(searchString);\n    }\n\n    //用于用户点击应用详情\n    const handleClick = (app) => {\n        setSelectedApp(app);\n        setShowModal(true);\n    };\n\n    //用于应用为failed时删除应用\n    const deleteApp = (app) => {\n        setSelectedApp(app);\n        setShowUninstallConform(true);\n    };\n\n    //用于应用为failed时显示错误信息弹窗\n    const showError = (app) => {\n        setSelectedApp(app);\n        setShowErrorInfo(true);\n    };\n\n    //用于关闭显示错误消息弹窗\n    const cancelShowError = () => {\n        setShowErrorInfo(false);\n    };\n\n    //用于取消删除应用\n    const canceldeleteApp = () => {\n        setShowUninstallConform(false);\n    };\n\n    //用于关闭应用详情的弹窗\n    const handleClose = () => {\n        setShowModal(false);\n        setSelectedApp(null);\n    };\n\n    const handleAlertClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setShowAlert(false);\n        setAlertMessage(\"\");\n    };\n\n    //用于立即刷新数据\n    const handleDataChange = () => {\n        getAllAppsOnce();\n    };\n\n    //非官方应用的操作\n    const appActions = {\n        \"Stop\": {\n            api: AppStop,\n        },\n        \"Start\": {\n            api: AppStart,\n        },\n        \"Restart\": {\n            api: AppRestart,\n        },\n        \"Uninstall\": {\n            api: AppUninstall,\n        }\n    }\n\n    //处理非官方应用的操作\n    const NoOfficialAppClick = async (label, app) => {\n        if (label === \"Uninstall\") {\n            setSelectedApp(app);\n            setShowUninstallConform(true);\n            return;\n        }\n\n        setIsLoading(true);\n        try {\n            const response = await appActions[label].api({ app_id: app.app_id });\n            if (response.data.Error) {\n                setShowAlert(true);\n                setAlertType(\"error\")\n                setAlertMessage(response.data.Error.Message);\n            }\n            else {\n                setShowAlert(true);\n                setAlertType(\"success\")\n                setAlertMessage(\"执行成功\");\n                handleDataChange();\n            }\n        }\n        catch (error) {\n            navigate(\"/error-500\");\n        }\n        finally {\n            setIsLoading(false);\n        }\n    }\n\n    return (\n        <>\n            <Row className=\"mb-2 align-items-center\">\n                <Col xs={12} sm={6} md={3} lg={2}>\n                    <span style={{ fontSize: \"28px\" }}>{_(\"My Apps\")}</span>\n                </Col>\n                <Col xs={12} sm={6} md={3} lg={2}>\n                    <FormInput\n                        value={selectedStatus}\n                        name=\"select\"\n                        type=\"select\"\n                        className=\"form-select\"\n                        key=\"select\"\n                        onChange={(e) => changeStatus(e.target.value)}\n                    >\n                        <option value=\"all\">{\"All States\"}</option>\n                        <option value=\"installing\">installing</option>\n                        <option value=\"running\">running</option>\n                        <option value=\"exited\">exited</option>\n                        <option value=\"restarting\">restarting</option>\n                        <option value=\"failed\">failed</option>\n                    </FormInput>\n                </Col>\n                <Col xs={12} sm={12} md={6} lg={7}>\n                    <FormInput\n                        type=\"text\"\n                        name=\"search\"\n                        placeholder=\"Search for apps like WordPress, Dropbox, Slack, Trello, …\"\n                        onChange={(e) => handleInputChange(e.target.value)}\n                    />\n                </Col>\n                <Col xs={12} sm={12} md={12} lg={1}>\n                    <Button\n                        variant=\"primary\"\n                        className=\"float-end\"\n                        onClick={() => {\n                            window.location.reload(false);\n                        }}\n                    >\n                        {_(\"Refresh\")}\n                    </Button>\n                </Col>\n            </Row>\n\n            {\n                [true, false].map((official_app) => {\n                    // 过滤出符合条件的apps\n                    const filteredApps = apps.filter((app) => selectedStatus === 'all' || app.status === selectedStatus)\n                        .filter((app) => app.official_app === official_app)\n                        .filter((app) => app.customer_name.includes(searchString));\n                    // 如果有数据，返回一个Row组件，否则返回null\n                    return filteredApps.length > 0 ? (\n                        <Row>\n                            {/* 根据official_app的值显示不同的标题 */}\n                            <h4 style={official_app ? {} : { paddingTop: \"10px\" }}>{official_app ? _(\"Websoft9's Apps\") : _(\"Other Apps\")}</h4>\n                            {filteredApps.map((app, i) => (\n                                <Col xxl={2} md={3} key={app.app_id + i} className=\"appstore-item\">\n                                    <div className='appstore-item-content highlight text-align-center'>\n                                        {\n                                            (!official_app && (app.status === \"running\" || app.status === \"exited\")) &&\n                                            <Dropdown className=\"float-end\">\n                                                <Dropdown.Toggle as={Link} to=\"#\" className=\"arrow-none card-drop\">\n                                                    {isLoading ? <Spinner className=\"spinner-border-sm noti-icon\" /> : <i className=\"dripicons-gear noti-icon\" />}\n                                                </Dropdown.Toggle>\n                                                <Dropdown.Menu align=\"end\">\n                                                    {(menuItems(app.status) || []).map((item, index) => {\n                                                        return (\n                                                            <React.Fragment key={index}>\n                                                                {item.condition && item.hasDivider && <Dropdown.Divider as=\"div\" />}\n                                                                {\n                                                                    item.condition && <Dropdown.Item className={classNames(item.variant ? item.variant : '')}\n                                                                        onClick={() => NoOfficialAppClick(item.label, app)}\n                                                                    >\n                                                                        {item.icon && <i className={classNames(item.icon, 'me-1')}></i>}\n                                                                        {/* {isLoading ? <Spinner className=\"spinner-border-sm noti-icon\" /> : item.icon && <i className={classNames(item.icon, 'me-1')}></i>} */}\n                                                                        {item.label}\n                                                                    </Dropdown.Item>\n                                                                }\n                                                            </React.Fragment>\n                                                        );\n                                                    })}\n                                                </Dropdown.Menu>\n                                            </Dropdown>\n                                        }\n                                        {\n                                            (official_app && (app.status === \"running\" || app.status === \"exited\")) &&\n                                            <>\n                                                <div className=\"float-end arrow-none card-drop p-0\" onClick={() => { handleClick(app) }}>\n                                                    <i className=\"dripicons-gear noti-icon\"></i>\n                                                </div>\n                                                <div className=\"clearfix\"></div>\n                                            </>\n                                        }\n                                        {\n                                            (official_app && app.status === \"installing\") &&\n                                            <>\n                                                <div className=\"float-end arrow-none card-drop p-0\">\n                                                    <i className=\"dripicons-empty noti-icon\"></i>\n                                                </div>\n                                                <div className=\"clearfix\"></div>\n                                            </>\n                                        }\n                                        {\n                                            app.status === 'failed' &&\n                                            <>\n                                                <div className=\"float-end arrow-none card-drop p-0\" >\n                                                    <i className=\"dripicons-information noti-icon\" style={{ paddingRight: \"10px\" }} onClick={() => { showError(app) }}></i>\n                                                    <i className=\"dripicons-trash noti-icon\" onClick={() => { deleteApp(app) }}></i>\n                                                </div>\n                                                <div className=\"clearfix\"></div>\n                                            </>\n                                        }\n                                        <div>\n                                            <img\n                                                src={app.image_url}\n                                                alt={app.app_name}\n                                                className=\"app-icon\"\n                                                style={{ margin: \"20px 10px 20px 10px\" }}\n                                                onError={(e) => (e.target.src = DefaultImg)}\n                                            />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"appstore-item-content-title\" style={{ color: \"#2196f3\" }}>\n                                                {app.customer_name}\n                                            </h3>\n                                            <div style={{ color: app.status === 'failed' ? 'red' : 'inherit', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                                                {app.status && app.status === \"installing\" && <Spinner className=\"spinner-border-sm m-2\" />}\n                                                {\" \"}\n                                                <div className=\"m-2\">{app.status}</div>\n                                            </div>\n                                        </div>\n                                    </div >\n                                </Col>\n                            ))}\n                        </Row >\n                    ) : null;\n                })\n            }\n            {\n                showModal && <AppDetailModal current_app={selectedApp} showFlag={showModal} onClose={handleClose} onDataChange={handleDataChange} />\n            }\n            {\n                showUninstallConform &&\n                <UninstallConform showConform={showUninstallConform} onClose={canceldeleteApp} app={selectedApp} onDataChange={handleDataChange} />\n            }\n            {\n                showErrorInfo &&\n                <ErrorInfoModal showConform={showErrorInfo} onClose={cancelShowError} app={selectedApp} />\n            }\n            {\n                showAlert &&\n                <Snackbar open={showAlert} autoHideDuration={5000} onClose={handleAlertClose} anchorOrigin={{ vertical: 'top', horizontal: 'center' }}>\n                    <MyMuiAlert onClose={handleAlertClose} severity={alertType} sx={{ width: '100%' }}>\n                        {alertMessage}\n                    </MyMuiAlert>\n                </Snackbar>\n            }\n        </>\n    );\n};\n\nexport default MyApps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}