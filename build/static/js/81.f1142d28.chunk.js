"use strict";(self.webpackChunkappstore=self.webpackChunkappstore||[]).push([[81],{165:function(e,n,t){t.d(n,{r:function(){return m},f:function(){return x}});var a,s=t(4165),r=t(3144),l=t(5671),i=t(5861),o=t(1243),c=t(7689);t(184);function u(){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((0,s.Z)().mark((function e(){var n,t,r,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=10;break}return e.next=3,fetch("../myapps/config.json");case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,r=t.APPMANAGE.APPMANAGE_USERNAME,l=t.APPMANAGE.APPMANAGE_PASSWORD,a=btoa(r+":"+l);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.Z.defaults.headers.post["Content-Type"]="application/json",o.Z.defaults.headers.get["Content-Type"]="application/json",o.Z.defaults.headers.common["Cache-Control"]="no-cache",o.Z.defaults.headers.common.Pragma="no-cache",o.Z.defaults.headers.common.Expires="0",o.Z.interceptors.response.use((function(e){return e}),(function(e){var n;if(e&&e.response&&404===e.response.status)c.Fg;else{if(!e||!e.response||500!==e.response.status)return n=e.response&&e.response.data?e.response.data.message:e.message||e,Promise.reject(n);c.Fg}}));var p=(0,r.Z)((function e(){(0,l.Z)(this,e),this.get=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n,t){var a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.t0=e.sent,o.Z.defaults.headers.common.Authorization="Basic "+e.t0,t?(r=t?Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"):"",a=o.Z.get("".concat(n,"?").concat(r),t)):a=o.Z.get("".concat(n),t),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),this.create=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.t0=e.sent,o.Z.defaults.headers.common.Authorization="Basic "+e.t0,e.abrupt("return",o.Z.post(n,t));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})),h=new p;function m(e){return h.get("".concat("/AppManage/AppInstall"),e)}function x(e){return h.get("".concat("/AppManage/AppStoreUpdate"),e)}},4941:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var a=t(4165),s=t(5861),r=t(9439),l=t(1413),i=t(5200),o=t(954),c=t(1243),u=t(7346),d=t.n(u),p=t(2791),h=t(2869),m=t(3340),x=t(3360),v=t(9743),f=t(2677),g=t(9795),j=t(4849),Z=t(7689),y=t.p+"static/media/default.50b14dd03b88a6d9022a.png",k=t(5987),b=t(1694),C=t.n(b),N=t(3161),w=t(184),A=["label","type","name","value","readOnly","placeholder","register","errors","className","labelClassName","containerClass","refCallback","children"],S=function(e){var n=e.name,t=e.placeholder,a=e.refCallback,s=e.errors,i=e.register,o=e.className,c=e.value,u=e.readOnly,d=(0,p.useState)(!1),h=(0,r.Z)(d,2),m=h[0],x=h[1];return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(N.Z,{className:"mb-0",children:[(0,w.jsx)(g.Z.Control,(0,l.Z)((0,l.Z)({type:m?"text":"password",placeholder:t,name:n,id:n,as:"input",ref:function(e){a&&a(e)},className:o,isInvalid:!(!s||!s[n])},i?i(n):{}),{},{autoComplete:n,defaultValue:c,readOnly:u})),(0,w.jsx)("div",{className:C()("input-group-text","input-group-password",{"show-password":m}),"data-password":m?"true":"false",children:(0,w.jsx)("span",{className:"password-eye",onClick:function(){x(!m)}})})]})})},F=function(e){var n=e.label,t=e.type,a=e.name,s=e.value,r=e.readOnly,i=e.placeholder,o=e.register,c=e.errors,u=e.className,d=e.labelClassName,p=e.containerClass,h=e.refCallback,m=e.children,x=(0,k.Z)(e,A),v="textarea"===t?"textarea":"select"===t?"select":"input";return(0,w.jsx)(w.Fragment,{children:"hidden"===t?(0,w.jsx)("input",(0,l.Z)((0,l.Z)({type:t,name:a},o?o(a):{}),x)):(0,w.jsx)(w.Fragment,{children:"password"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.Z.Group,{className:p,children:[n?(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)(g.Z.Label,{className:d,children:n})," ",m," "]}):null,(0,w.jsx)(S,{name:a,placeholder:i,refCallback:h,errors:c,register:o,className:u,value:s,readOnly:r}),c&&c[a]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",className:"d-block",children:c[a].message}):null]})}):(0,w.jsx)(w.Fragment,{children:"select"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.Z.Group,{className:p,children:[n?(0,w.jsx)(g.Z.Label,{className:d,children:n}):null,(0,w.jsx)(g.Z.Select,(0,l.Z)((0,l.Z)((0,l.Z)({type:t,label:n,name:a,id:a,ref:function(e){h&&h(e)},comp:v,className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x),{},{children:m})),c&&c[a]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})}):(0,w.jsx)(w.Fragment,{children:"checkbox"===t||"radio"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.Z.Group,{className:p,children:[(0,w.jsx)(g.Z.Check,(0,l.Z)((0,l.Z)({type:t,label:n,name:a,id:a,ref:function(e){h&&h(e)},className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x)),c&&c[a]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})}):(0,w.jsxs)(g.Z.Group,{className:p,children:[n?(0,w.jsx)(g.Z.Label,{className:d,children:n}):null,(0,w.jsx)(g.Z.Control,(0,l.Z)((0,l.Z)((0,l.Z)({type:t,placeholder:i,value:s,name:a,id:a,as:v,ref:function(e){h&&h(e)},className:u,isInvalid:!(!c||!c[a])},o?o(a):{}),x),{},{autoComplete:a,children:m||null})),c&&c[a]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[a].message}):null]})})})})})},P=t(165),E=d().gettext,_=d().language,G=p.forwardRef((function(e,n){return(0,w.jsx)(i.Z,(0,l.Z)({elevation:6,ref:n,variant:"filled"},e))})),z=function(e){var n,t,l,i=e.product,c=e.showFlag,u=e.onClose,v=(0,p.useState)(0),f=(0,r.Z)(v,2),g=f[0],j=f[1],k=(0,Z.s0)(),b=(0,p.useState)(!0),C=(0,r.Z)(b,2),N=C[0],A=C[1],S=(0,p.useState)(""),z=(0,r.Z)(S,2),I=z[0],O=z[1],L=(0,p.useState)(!1),M=(0,r.Z)(L,2),R=M[0],B=M[1],D=(0,p.useState)(""),H=(0,r.Z)(D,2),T=H[0],U=H[1],V=(0,p.useState)(!1),W=(0,r.Z)(V,2),q=W[0],Q=W[1];function J(){return(J=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=20;break}if(!(!I||I.length<2||I.length>20)){e.next=6;break}B(!0),U(E("Please enter a custom application name between 2 and 20 characters.")),e.next=19;break;case 6:return e.prev=6,Q(!0),e.next=10,(0,P.r)({app_name:i.key,app_version:ee,customer_app_name:I});case 10:(n=e.sent).data.Error?(B(!0),U(n.data.Error.Message),Q(!1)):(B(!1),U(""),d().file("/etc/hostname").watch((function(e){console.log(e)})),d().jump("/myapps"),u()),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),B(!1),U(""),k("/error-500");case 19:return e.abrupt("return");case 20:A(!N);case 21:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}var K=((null===(n=i.distribution)||void 0===n?void 0:n.filter((function(e){return"Community"===e.key})))||[]).map((function(e){return e.value})),X=K&&1===K.length?K.toString().split(","):K,Y=(0,p.useState)(X[0]),$=(0,r.Z)(Y,2),ee=$[0],ne=$[1],te=null===i||void 0===i||null===(t=i.logo)||void 0===t||null===(l=t.imageurl)||void 0===l?void 0:l.split("/").pop(),ae=function(e,n){"clickaway"!==n&&(B(!1),U(""))};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(h.Z,{show:c,onHide:u,size:"lg",scrollable:"true",backdrop:"static",children:[(0,w.jsx)(h.Z.Header,{onHide:u,closeButton:!0,children:(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,w.jsx)("img",{src:"./static/data/logos/".concat(te),alt:"",className:"app-icon",onError:function(e){return e.target.src=y}})}),(0,w.jsxs)("div",{className:"col-same-height",children:[(0,w.jsx)("h4",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:i.trademark}),(0,w.jsx)("div",{children:(0,w.jsxs)("a",{rel:"noreferrer",href:"https://support.websoft9.com/docs/"+i.key,target:"_blank",style:{color:"#2196f3"},children:[i.trademark," ",E("developers")]})}),(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[E("Version")," : "]})," ",K]}),(0,w.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[E("Requires at least")," : ",i.vcpu," vCPU,  ",i.memory,"  GB memory, ",i.storage," GB storage"]})})]})]})}),(0,w.jsxs)(h.Z.Body,{children:[(0,w.jsxs)("div",{style:{display:N?"block":"none"},children:[(0,w.jsx)(m.Z,{activeIndex:g,onSelect:function(e,n){j(e)},style:{width:"80%",margin:"0 auto"},children:(i.screenshots||[]).map((function(e){var n=e.value.split("/").pop();return(0,w.jsx)(m.Z.Item,{children:(0,w.jsx)("img",{className:"d-block",src:"./static/data/screenshots/".concat("zh_CN"===_?"zh":"en","/").concat(n),alt:null===e||void 0===e?void 0:e.key,width:"100%",height:"300px"})},null===e||void 0===e?void 0:e.id)}))}),(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("h4",{children:E("Overview")}),i.overview]}),(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("h4",{children:E("Description")}),i.description]})]}),(0,w.jsx)("div",{style:{display:N?"none":"block"},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[E("Version")," :"]}),X&&(0,w.jsx)(F,{name:"select",type:"select",className:"form-select",onChange:function(e){return n=e.target.value,void ne(n);var n},children:(X||[]).map((function(e,n){return(0,w.jsx)("option",{value:e,children:e},e+n)}))},"select")]}),(0,w.jsxs)("div",{style:{marginTop:"5px"},children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[E("Name")," :"]}),(0,w.jsx)(F,{type:"text",value:I,name:"app_Name",placeholder:E("Only letters and numbers from 2 to 20 are allowed. No special characters."),onChange:function(e){!function(e){if(O(e),e){var n=e.replace(/[^a-z0-9]/gi,"").toLowerCase();O(n),B(!1),U("")}else B(!0),U(E("Please enter a custom application name between 2 and 20 characters."))}(e.target.value)}})]})]})})]}),(0,w.jsxs)(h.Z.Footer,{children:[(0,w.jsx)(x.Z,{variant:"light",onClick:u,children:E("Close")})," ",(0,w.jsx)(x.Z,{disabled:q,variant:"primary",onClick:function(){return J.apply(this,arguments)},children:E("Install")})]})]}),R&&(0,w.jsx)(o.Z,{open:R,autoHideDuration:5e3,onClose:ae,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,w.jsx)(G,{onClose:ae,severity:"error",sx:{width:"100%"},children:T})})]})},I=function(){var e=(0,p.useState)(!1),n=(0,r.Z)(e,2),t=n[0],l=n[1],i=(0,p.useState)(null),o=(0,r.Z)(i,2),u=o[0],d=o[1],h=(0,p.useState)(null),m=(0,r.Z)(h,2),x=m[0],k=m[1],b=(0,p.useState)(null),C=(0,r.Z)(b,2),N=C[0],A=C[1],S=(0,p.useState)(!0),P=(0,r.Z)(S,2),G=P[0],I=P[1],O=(0,p.useState)(""),L=(0,r.Z)(O,2),M=L[0],R=L[1],B=(0,p.useState)([]),D=(0,r.Z)(B,2),H=D[0],T=D[1],U=(0,p.useState)([]),V=(0,r.Z)(U,2),W=V[0],q=V[1],Q=(0,p.useState)([]),J=(0,r.Z)(Q,2),K=J[0],X=J[1],Y=(0,p.useState)(!1),$=(0,r.Z)(Y,2),ee=$[0],ne=$[1],te=(0,Z.s0)(),ae=(0,p.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var n,t,s,l,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,Promise.all([c.Z.get("./static/data/json/catalog_".concat("zh_CN"===_?"zh":"en",".json")),c.Z.get("./static/data/json/product_".concat("zh_CN"===_?"zh":"en",".json"))]);case 4:if(n=e.sent,t=(0,r.Z)(n,2),s=t[0],l=t[1],200!==s.status){e.next=13;break}i=s.data.sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position})),T(i),e.next=14;break;case 13:return e.abrupt("return",(0,w.jsx)("p",{children:"Error: Failed to fetch directory data "}));case 14:if(200!==l.status){e.next=19;break}q(l.data),X(l.data),e.next=20;break;case 19:return e.abrupt("return",(0,w.jsx)("p",{children:"Error: Failed to fetch product data "}));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),te("/error-500");case 25:ne(!1);case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),[_,T,q,X]);if((0,p.useEffect)((function(){ae()}),[ae]),ee)return(0,w.jsx)(j.Z,{className:"dis_mid"});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(v.Z,{className:"mb-2",children:[(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsxs)(g.Z.Group,{as:v.Z,children:[(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsxs)(F,{name:"select1",type:"select",className:"form-select",onChange:function(e){return function(e){var n,t,a,s,r,l=("All"===e?[]:null===(n=H.filter((function(n){return n.key===e})))||void 0===n||null===(t=n[0])||void 0===t||null===(a=t.linkedFrom)||void 0===a||null===(s=a.catalogCollection)||void 0===s?void 0:s.items).sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position}));k(l),r=W.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))}))})),X("All"===e?W:r),A(r),I(!1),R("")}(e.target.value)},children:[(0,w.jsx)("option",{value:"All",selected:G,children:E("All")}),(H||[]).map((function(e,n){return(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select1")}),(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsxs)(F,{name:"select2",type:"select",className:"form-select",onChange:function(e){return function(e){var n;n="All"===e?N:W.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))})),X(n),R("")}(e.target.value)},children:[(0,w.jsx)("option",{value:"All",children:E("All")}),(x||[]).map((function(e,n){return(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select2")})]})}),(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsx)(f.Z,{xs:"auto",children:(0,w.jsx)(F,{type:"text",name:"search",placeholder:E("Search for apps like WordPress, MySQL, GitLab, \u2026"),value:M,onChange:function(e){return function(e){var n;R(e),n=""===e?W:W.filter((function(n){return n.trademark.toLowerCase().includes(e)||n.key.toLowerCase().includes(e)||n.summary.toLowerCase().includes(e)})),X(n),I(!0),k(null)}(e.target.value)}})})})]}),(0,w.jsx)(v.Z,{children:(K||[]).map((function(e,n){var t,a,s=null===e||void 0===e||null===(t=e.logo)||void 0===t||null===(a=t.imageurl)||void 0===a?void 0:a.split("/").pop();return(0,w.jsx)(f.Z,{xxl:3,sm:6,md:4,className:"appstore-item",children:(0,w.jsxs)("div",{className:"appstore-item-content highlight",onClick:function(){d(e),l(!0)},children:[(0,w.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,w.jsx)("img",{src:"./static/data/logos/".concat(s),alt:"",className:"app-icon",onError:function(e){return e.target.src=y}})}),(0,w.jsxs)("div",{className:"col-same-height",style:{textAlign:"initial"},children:[(0,w.jsx)("h4",{className:"appstore-item-content-title",children:null===e||void 0===e?void 0:e.trademark}),(0,w.jsx)("div",{className:"appstore-item-content-tagline text-muted",children:null===e||void 0===e?void 0:e.summary})]})]})},"app-"+n)}))}),t&&(0,w.jsx)(z,{product:u,showFlag:t,onClose:function(){l(!1),d(null)}})]})}}}]);
//# sourceMappingURL=81.f1142d28.chunk.js.map