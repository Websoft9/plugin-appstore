"use strict";(self.webpackChunkappstore=self.webpackChunkappstore||[]).push([[81],{4941:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var s=t(4165),l=t(5861),a=t(9439),r=t(1413),i=t(5200),o=t(954),c=t(1243),d=t(7346),u=t.n(d),p=t(2791),h=t(2869),m=t(3340),x=t(3360),v=t(9743),f=t(2677),g=t(9795),j=t(4849),Z=t(7689),y=t.p+"static/media/default.50b14dd03b88a6d9022a.png",k=t(5987),b=t(1694),C=t.n(b),N=t(3161),w=t(184),S=["label","type","name","value","readOnly","placeholder","register","errors","className","labelClassName","containerClass","refCallback","children"],F=function(e){var n=e.name,t=e.placeholder,s=e.refCallback,l=e.errors,i=e.register,o=e.className,c=e.value,d=e.readOnly,u=(0,p.useState)(!1),h=(0,a.Z)(u,2),m=h[0],x=h[1];return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(N.Z,{className:"mb-0",children:[(0,w.jsx)(g.Z.Control,(0,r.Z)((0,r.Z)({type:m?"text":"password",placeholder:t,name:n,id:n,as:"input",ref:function(e){s&&s(e)},className:o,isInvalid:!(!l||!l[n])},i?i(n):{}),{},{autoComplete:n,defaultValue:c,readOnly:d})),(0,w.jsx)("div",{className:C()("input-group-text","input-group-password",{"show-password":m}),"data-password":m?"true":"false",children:(0,w.jsx)("span",{className:"password-eye",onClick:function(){x(!m)}})})]})})},_=function(e){var n=e.label,t=e.type,s=e.name,l=e.value,a=e.readOnly,i=e.placeholder,o=e.register,c=e.errors,d=e.className,u=e.labelClassName,p=e.containerClass,h=e.refCallback,m=e.children,x=(0,k.Z)(e,S),v="textarea"===t?"textarea":"select"===t?"select":"input";return(0,w.jsx)(w.Fragment,{children:"hidden"===t?(0,w.jsx)("input",(0,r.Z)((0,r.Z)({type:t,name:s},o?o(s):{}),x)):(0,w.jsx)(w.Fragment,{children:"password"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.Z.Group,{className:p,children:[n?(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)(g.Z.Label,{className:u,children:n})," ",m," "]}):null,(0,w.jsx)(F,{name:s,placeholder:i,refCallback:h,errors:c,register:o,className:d,value:l,readOnly:a}),c&&c[s]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",className:"d-block",children:c[s].message}):null]})}):(0,w.jsx)(w.Fragment,{children:"select"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.Z.Group,{className:p,children:[n?(0,w.jsx)(g.Z.Label,{className:u,children:n}):null,(0,w.jsx)(g.Z.Select,(0,r.Z)((0,r.Z)((0,r.Z)({type:t,label:n,name:s,id:s,ref:function(e){h&&h(e)},comp:v,className:d,isInvalid:!(!c||!c[s])},o?o(s):{}),x),{},{children:m})),c&&c[s]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[s].message}):null]})}):(0,w.jsx)(w.Fragment,{children:"checkbox"===t||"radio"===t?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(g.Z.Group,{className:p,children:[(0,w.jsx)(g.Z.Check,(0,r.Z)((0,r.Z)({type:t,label:n,name:s,id:s,ref:function(e){h&&h(e)},className:d,isInvalid:!(!c||!c[s])},o?o(s):{}),x)),c&&c[s]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[s].message}):null]})}):(0,w.jsxs)(g.Z.Group,{className:p,children:[n?(0,w.jsx)(g.Z.Label,{className:u,children:n}):null,(0,w.jsx)(g.Z.Control,(0,r.Z)((0,r.Z)((0,r.Z)({type:t,placeholder:i,value:l,name:s,id:s,as:v,ref:function(e){h&&h(e)},className:d,isInvalid:!(!c||!c[s])},o?o(s):{}),x),{},{autoComplete:s,children:m||null})),c&&c[s]?(0,w.jsx)(g.Z.Control.Feedback,{type:"invalid",children:c[s].message}):null]})})})})})},I=u().gettext,A=u().language,z=p.forwardRef((function(e,n){return(0,w.jsx)(i.Z,(0,r.Z)({elevation:6,ref:n,variant:"filled"},e))})),L=function(e){var n,t,r,i=e.product,c=e.showFlag,d=e.onClose,v=(0,p.useState)(0),f=(0,a.Z)(v,2),g=f[0],j=f[1],k=(0,Z.s0)(),b=(0,p.useState)(!0),C=(0,a.Z)(b,2),N=C[0],S=C[1],F=(0,p.useState)(""),L=(0,a.Z)(F,2),O=L[0],G=L[1],E=(0,p.useState)(!1),P=(0,a.Z)(E,2),R=P[0],B=P[1],H=(0,p.useState)(""),D=(0,a.Z)(H,2),V=D[0],M=D[1],T=(0,p.useState)(!1),q=(0,a.Z)(T,2),J=q[0],Q=q[1];function U(){return(U=(0,l.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=3;break}if(!O||O.length<2||O.length>20)B(!0),M(I("Please enter a custom application name between 2 and 20 characters."));else try{Q(!0),"5000",u().spawn(["docker","inspect","-f","{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}","websoft9-appmanage"]).then((function(e){n=e.trim(),u().http({address:n,port:5e3}).get("/AppInstall",{app_name:i.key,app_version:$,customer_app_name:O}).then((function(e){(e=JSON.parse(e)).Error?(B(!0),M(e.Error.Message),Q(!1)):(B(!1),M(""),u().file("/etc/hostname").watch((function(e){console.log(e)})),u().jump("/myapps"),d())})).catch((function(e){B(!0),M(e.message),Q(!1)}))})).catch((function(e){B(!0),M(e.message),Q(!1)}))}catch(t){B(!1),M(""),k("/error-500")}return e.abrupt("return");case 3:S(!N);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=((null===(n=i.distribution)||void 0===n?void 0:n.filter((function(e){return"Community"===e.key})))||[]).map((function(e){return e.value})),K=W&&1===W.length?W.toString().split(","):W,X=(0,p.useState)(K[0]),Y=(0,a.Z)(X,2),$=Y[0],ee=Y[1],ne=null===i||void 0===i||null===(t=i.logo)||void 0===t||null===(r=t.imageurl)||void 0===r?void 0:r.split("/").pop(),te=function(e,n){"clickaway"!==n&&(B(!1),M(""))};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(h.Z,{show:c,onHide:d,size:"lg",scrollable:"true",backdrop:"static",children:[(0,w.jsx)(h.Z.Header,{onHide:d,closeButton:!0,children:(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,w.jsx)("img",{src:"./static/data/logos/".concat(ne),alt:"",className:"app-icon",onError:function(e){return e.target.src=y}})}),(0,w.jsxs)("div",{className:"col-same-height",children:[(0,w.jsx)("h4",{className:"appstore-item-content-title",style:{marginTop:"5px"},children:i.trademark}),(0,w.jsx)("div",{children:(0,w.jsxs)("a",{rel:"noreferrer",href:"https://support.websoft9.com/docs/"+i.key,target:"_blank",style:{color:"#2196f3"},children:[i.trademark," ",I("developers")]})}),(0,w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[I("Version")," : "]})," ",W]}),(0,w.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[I("Requires at least")," : ",i.vcpu," vCPU,  ",i.memory,"  GB memory, ",i.storage," GB storage"]})})]})]})}),(0,w.jsxs)(h.Z.Body,{children:[(0,w.jsxs)("div",{style:{display:N?"block":"none"},children:[(0,w.jsx)(m.Z,{activeIndex:g,onSelect:function(e,n){j(e)},style:{width:"80%",margin:"0 auto"},children:(i.screenshots||[]).map((function(e){var n=e.value.split("/").pop();return(0,w.jsx)(m.Z.Item,{children:(0,w.jsx)("img",{className:"d-block",src:"./static/data/screenshots/".concat("zh_CN"===A?"zh":"en","/").concat(n),alt:null===e||void 0===e?void 0:e.key,width:"100%",height:"300px"})},null===e||void 0===e?void 0:e.id)}))}),(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("h4",{children:I("Overview")}),i.overview]}),(0,w.jsxs)("div",{style:{padding:"10px"},children:[(0,w.jsx)("h4",{children:I("Description")}),i.description]})]}),(0,w.jsx)("div",{style:{display:N?"none":"block"},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[I("Version")," :"]}),K&&(0,w.jsx)(_,{name:"select",type:"select",className:"form-select",onChange:function(e){return n=e.target.value,void ee(n);var n},children:(K||[]).map((function(e,n){return(0,w.jsx)("option",{value:e,children:e},e+n)}))},"select")]}),(0,w.jsxs)("div",{style:{marginTop:"5px"},children:[(0,w.jsxs)("span",{style:{marginRight:"5px"},children:[I("Name")," :"]}),(0,w.jsx)(_,{type:"text",value:O,name:"app_Name",placeholder:I("Only letters and numbers from 2 to 20 are allowed. No special characters."),onChange:function(e){!function(e){if(G(e),e){var n=e.replace(/[^a-z0-9]/gi,"").toLowerCase();G(n),B(!1),M("")}else B(!0),M(I("Please enter a custom application name between 2 and 20 characters."))}(e.target.value)}})]})]})})]}),(0,w.jsxs)(h.Z.Footer,{children:[(0,w.jsx)(x.Z,{variant:"light",onClick:d,children:I("Close")})," ",(0,w.jsx)(x.Z,{disabled:J,variant:"primary",onClick:function(){return U.apply(this,arguments)},children:I("Install")})]})]}),R&&(0,w.jsx)(o.Z,{open:R,autoHideDuration:5e3,onClose:te,anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,w.jsx)(z,{onClose:te,severity:"error",sx:{width:"100%"},children:V})})]})},O=function(){var e=(0,p.useState)(!1),n=(0,a.Z)(e,2),t=n[0],r=n[1],i=(0,p.useState)(null),o=(0,a.Z)(i,2),d=o[0],u=o[1],h=(0,p.useState)(null),m=(0,a.Z)(h,2),x=m[0],k=m[1],b=(0,p.useState)(null),C=(0,a.Z)(b,2),N=C[0],S=C[1],F=(0,p.useState)(!0),z=(0,a.Z)(F,2),O=z[0],G=z[1],E=(0,p.useState)(""),P=(0,a.Z)(E,2),R=P[0],B=P[1],H=(0,p.useState)([]),D=(0,a.Z)(H,2),V=D[0],M=D[1],T=(0,p.useState)([]),q=(0,a.Z)(T,2),J=q[0],Q=q[1],U=(0,p.useState)([]),W=(0,a.Z)(U,2),K=W[0],X=W[1],Y=(0,p.useState)(!1),$=(0,a.Z)(Y,2),ee=$[0],ne=$[1],te=(0,Z.s0)(),se=(0,p.useCallback)((0,l.Z)((0,s.Z)().mark((function e(){var n,t,l,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,Promise.all([c.Z.get("./static/data/json/catalog_".concat("zh_CN"===A?"zh":"en",".json")),c.Z.get("./static/data/json/product_".concat("zh_CN"===A?"zh":"en",".json"))]);case 4:if(n=e.sent,t=(0,a.Z)(n,2),l=t[0],r=t[1],200!==l.status){e.next=13;break}i=l.data.sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position})),M(i),e.next=14;break;case 13:return e.abrupt("return",(0,w.jsx)("p",{children:"Error: Failed to fetch directory data "}));case 14:if(200!==r.status){e.next=19;break}Q(r.data),X(r.data),e.next=20;break;case 19:return e.abrupt("return",(0,w.jsx)("p",{children:"Error: Failed to fetch product data "}));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),te("/error-500");case 25:ne(!1);case 26:case"end":return e.stop()}}),e,null,[[1,22]])}))),[A,M,Q,X]);if((0,p.useEffect)((function(){se()}),[se]),ee)return(0,w.jsx)(j.Z,{className:"dis_mid"});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(v.Z,{className:"mb-2",children:[(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsxs)(g.Z.Group,{as:v.Z,children:[(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsxs)(_,{name:"select1",type:"select",className:"form-select",onChange:function(e){return function(e){var n,t,s,l,a,r=("All"===e?[]:null===(n=V.filter((function(n){return n.key===e})))||void 0===n||null===(t=n[0])||void 0===t||null===(s=t.linkedFrom)||void 0===s||null===(l=s.catalogCollection)||void 0===l?void 0:l.items).sort((function(e,n){return null===e.position&&null===n.position?0:null===e.position?1:null===n.position?-1:e.position-n.position}));k(r),a=J.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))}))})),X("All"===e?J:a),S(a),G(!1),B("")}(e.target.value)},children:[(0,w.jsx)("option",{value:"All",selected:O,children:I("All")}),(V||[]).map((function(e,n){return(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select1")}),(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsxs)(_,{name:"select2",type:"select",className:"form-select",onChange:function(e){return function(e){var n;n="All"===e?N:J.filter((function(n){var t;return null===n||void 0===n||null===(t=n.catalogCollection)||void 0===t?void 0:t.items.some((function(n){return n.key===e}))})),X(n),B("")}(e.target.value)},children:[(0,w.jsx)("option",{value:"All",children:I("All")}),(x||[]).map((function(e,n){return(0,w.jsx)("option",{value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.title},(null===e||void 0===e?void 0:e.key)+n)}))]},"select2")})]})}),(0,w.jsx)(f.Z,{sm:6,children:(0,w.jsx)(f.Z,{xs:"auto",children:(0,w.jsx)(_,{type:"text",name:"search",placeholder:I("Search for apps like WordPress, MySQL, GitLab, \u2026"),value:R,onChange:function(e){return function(e){var n;B(e),n=""===e?J:J.filter((function(n){return n.trademark.toLowerCase().includes(e)||n.key.toLowerCase().includes(e)||n.summary.toLowerCase().includes(e)})),X(n),G(!0),k(null)}(e.target.value)}})})})]}),(0,w.jsx)(v.Z,{children:(K||[]).map((function(e,n){var t,s,l=null===e||void 0===e||null===(t=e.logo)||void 0===t||null===(s=t.imageurl)||void 0===s?void 0:s.split("/").pop();return(0,w.jsx)(f.Z,{xxl:3,sm:6,md:4,className:"appstore-item",children:(0,w.jsxs)("div",{className:"appstore-item-content highlight",onClick:function(){u(e),r(!0)},children:[(0,w.jsx)("div",{className:"appstore-item-content-icon col-same-height",children:(0,w.jsx)("img",{src:"./static/data/logos/".concat(l),alt:l,className:"app-icon",onError:function(e){return e.target.src=y}})}),(0,w.jsxs)("div",{className:"col-same-height",style:{textAlign:"initial"},children:[(0,w.jsx)("h4",{className:"appstore-item-content-title",children:null===e||void 0===e?void 0:e.trademark}),(0,w.jsx)("div",{className:"appstore-item-content-tagline text-muted",children:null===e||void 0===e?void 0:e.summary})]})]})},"app-"+n)}))}),t&&(0,w.jsx)(L,{product:d,showFlag:t,onClose:function(){r(!1),u(null)}})]})}}}]);
//# sourceMappingURL=81.537530c2.chunk.js.map